
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Let's Encrypt with DirectAdmin or other Web Control Panels - Raymii.org</title>
        <style> *, ::before, ::after {background-repeat: no-repeat;-webkit-box-sizing: border-box;box-sizing: border-box;}::before, ::after {text-decoration: inherit;vertical-align: inherit;}html {cursor: default;font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.15;-moz-tab-size: 4;-o-tab-size: 4;tab-size: 4;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;word-break: break-word;}body {background-color: white;margin: 0;}h1 {font-size: 2em;margin: 0.67em 0;}hr {height: 0;overflow: visible;}main {display: block;}nav ol, nav ul {list-style: none;}pre {font-family: Roboto Mono, Menlo, Consolas, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}a {background-color: transparent;}abbr[title] {text-decoration: underline;-webkit-text-decoration: underline dotted;text-decoration: underline dotted;}b, strong {font-weight: bolder;}code, kbd, samp {font-family: Menlo, Consolas, Roboto Mono, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}small {font-size: 80%;}::-moz-selection {background-color: #b3d4fc;color: #000;text-shadow: none;}::selection {background-color: #b3d4fc;color: #000;text-shadow: none;}audio, canvas, iframe, img, svg, video {vertical-align: middle;}audio, video {display: inline-block;}audio:not([controls]) {display: none;height: 0;}img {border-style: none;}svg:not([fill]) {fill: currentColor;}svg:not(:root) {overflow: hidden;}table {border-collapse: collapse;}button, input, select, textarea {font-family: inherit;font-size: inherit;line-height: inherit;}button, input, select {margin: 0;}button {overflow: visible;text-transform: none;}button, [type="button"], [type="reset"], [type="submit"] {-webkit-appearance: button;}fieldset {padding: 0.35em 0.75em 0.625em;}input {overflow: visible;}legend {color: inherit;display: table;max-width: 100%;white-space: normal;}progress {display: inline-block;vertical-align: baseline;}select {text-transform: none;}textarea {margin: 0;overflow: auto;resize: vertical;}[type="checkbox"], [type="radio"] {padding: 0;}[type="search"] {-webkit-appearance: textfield;outline-offset: -2px;}::-webkit-inner-spin-button, ::-webkit-outer-spin-button {height: auto;}::-webkit-input-placeholder {color: inherit;opacity: 0.54;}::-webkit-search-decoration {-webkit-appearance: none;}::-webkit-file-upload-button {-webkit-appearance: button;font: inherit;}::-moz-focus-inner {border-style: none;padding: 0;}:-moz-focusring {outline: 1px dotted ButtonText;}details {display: block;}dialog {background-color: white;border: solid;color: black;display: block;height: -moz-fit-content;height: -webkit-fit-content;height: fit-content;left: 0;margin: auto;padding: 1em;position: absolute;right: 0;width: -moz-fit-content;width: -webkit-fit-content;width: fit-content;}dialog:not([open]) {display: none;}summary {display: list-item;}canvas {display: inline-block;}template {display: none;}a, area, button, input, label, select, summary, textarea, [tabindex] {-ms-touch-action: manipulation;touch-action: manipulation;}[hidden] {display: none;}[aria-busy="true"] {cursor: progress;}[aria-controls] {cursor: pointer;}[aria-disabled="true"], [disabled] {cursor: not-allowed;}[aria-hidden="false"][hidden]:not(:focus) {clip: rect(0, 0, 0, 0);display: inherit;position: absolute;}main, header, footer, article, section, aside, details, summary {margin: 0 auto;margin-bottom: 16px;width: 100%;}main {display: block;margin: 0 auto;max-width: 1000px;padding: 0 16px 16px;}footer {border-top: 1px solid rgba(0, 0, 0, 0.12);padding: 16px 0;text-align: left;}footer p {margin-bottom: 0;}hr {border: 0;border-top: 1px solid rgba(0, 0, 0, 0.12);display: block;margin-top: 16px;margin-bottom: 16px;width: 100%;-webkit-box-sizing: content-box;box-sizing: content-box;height: 0;overflow: visible;}img {height: auto;max-width: 100%;vertical-align: baseline;}@media screen and (max-width: 400px) {article, section, aside {clear: both;display: block;max-width: 100%;}img {margin-right: 16px;}}embed, iframe, video {border: 0;}body {color: rgba(0, 0, 0, 0.8);font-family: "Ubuntu", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size: 16px;line-height: 1.5;}p {margin: 0;margin-bottom: 16px;}h1, h2, h3, h4, h5, h6 {color: inherit;font-family: inherit;line-height: 1.2;font-weight: 500;}h1 {font-size: 40px;margin: 20px 0 16px;}h2 {font-size: 32px;margin: 20px 0 16px;}h3 {color: #75cc00;font-size: 28px;margin: 16px 0 4px;}h4 {color: #75cc00;font-size: 24px;margin: 16px 0 4px;}h5 {color: #75cc00;font-size: 20px;margin: 16px 0 4px;}h6 {color: #75cc00;font-size: 16px;margin: 16px 0 4px;}small {color: rgba(0, 0, 0, 0.54);vertical-align: bottom;}pre {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);display: block;font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;margin: 16px 0;padding: 16px;white-space: pre-wrap;overflow-wrap: break-word;}code {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;line-height: inherit;margin: 0;vertical-align: baseline;word-break: break-all;word-wrap: break-word;}a {color: #75cc00;text-decoration: none;background-color: transparent;}a:hover, a:focus {color: #0062cc;font-weight: bolder;text-decoration: underline;}dl {margin-bottom: 16px;}dd {margin-left: 40px;}ul, ol {margin-bottom: 8px;padding-left: 40px;vertical-align: baseline;}blockquote {border-left: 2px solid rgba(0, 0, 0, 0.8);font-family: Georgia, Times, "Times New Roman", serif;font-style: italic;margin: 16px 0;padding-left: 16px;}figcaption {font-family: Georgia, Times, "Times New Roman", serif;}u {text-decoration: underline;}s {text-decoration: line-through;}sup {font-size: 14px;vertical-align: super;}sub {font-size: 14px;vertical-align: sub;}mark {background: #ffeb3b;}input[type="text"], input[type="password"], input[type="email"], input[type="url"], input[type="date"], input[type="month"], input[type="time"], input[type="datetime"], input[type="datetime-local"], input[type="week"], input[type="number"], input[type="search"], input[type="tel"], select, textarea {background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}input[type="color"] {background: #fff;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;display: inline-block;vertical-align: middle;}input:not([type]) {-webkit-appearance: none;background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;text-align: left;}input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="url"]:focus, input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus, input[type="week"]:focus, input[type="number"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus, select:focus, textarea:focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input:not([type]):focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus {outline: 1px thin rgba(0, 0, 0, 0.12);}input[type="text"][disabled], input[type="password"][disabled], input[type="email"][disabled], input[type="url"][disabled], input[type="date"][disabled], input[type="month"][disabled], input[type="time"][disabled], input[type="datetime"][disabled], input[type="datetime-local"][disabled], input[type="week"][disabled], input[type="number"][disabled], input[type="search"][disabled], input[type="tel"][disabled], input[type="color"][disabled], select[disabled], textarea[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input:not([type])[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input[readonly], select[readonly], textarea[readonly] {border-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);}input:focus:invalid, textarea:focus:invalid, select:focus:invalid {border-color: #ea1c0d;color: #f44336;}input[type="file"]:focus:invalid:focus, input[type="radio"]:focus:invalid:focus, input[type="checkbox"]:focus:invalid:focus {outline-color: #f44336;}select {border: 1px solid rgba(0, 0, 0, 0.12);vertical-align: sub;}select:not([size]):not([multiple]) {height: -webkit-calc(2.25rem + 2px);height: calc(2.25rem + 2px);}select[multiple] {height: auto;}label {display: inline-block;line-height: 2;}fieldset {border: 0;margin: 0;padding: 8px 0;}legend {border-bottom: 1px solid rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.8);display: block;margin-bottom: 8px;padding: 8px 0;width: 100%;}textarea {overflow: auto;resize: vertical;}input[type=checkbox], input[type=radio] {-webkit-box-sizing: border-box;box-sizing: border-box;padding: 0;display: inline;}input[type=submit], input[type=reset], input[type=button], button {background-color: #75cc00;border: #75cc00;border-radius: 4px;color: #fff;padding: 8px 16px;display: inline-block;font-weight: 400;text-align: center;white-space: nowrap;vertical-align: middle;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;border: 1px solid transparent;font-size: 1rem;line-height: 1.5;-webkit-transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;}input[type=submit]::-moz-focus-inner, input[type=reset]::-moz-focus-inner, input[type=button]::-moz-focus-inner, button::-moz-focus-inner {padding: 0;}input[type=submit]:hover, input[type=reset]:hover, input[type=button]:hover, button:hover {background-color: #0069d9;border-color: #0062cc;color: #fff;}input[type=submit]:not(:disabled):active, input[type=reset]:not(:disabled):active, input[type=button]:not(:disabled):active, button:not(:disabled):active {background-color: #0062cc;border-color: #005cbf;color: #fff;}input[type=submit]:focus, input[type=reset]:focus, input[type=button]:focus, button:focus {outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);}input[type=submit]:disabled, input[type=reset]:disabled, input[type=button]:disabled, button:disabled {opacity: .65;cursor: not-allowed;background-color: #75cc00;border-color: #75cc00;color: #fff;}table {border-top: 1px solid rgba(0, 0, 0, 0.12);margin-bottom: 16px;}caption {padding: 8px 0;}thead th {border: 0;border-bottom: 2px solid rgba(0, 0, 0, 0.12);text-align: left;}tr {margin-bottom: 8px;}th, td {border-bottom: 1px solid rgba(0, 0, 0, 0.12);padding: 16px;white-space: nowrap;vertical-align: inherit;}tfoot tr {text-align: left;}tfoot td {color: rgba(0, 0, 0, 0.54);font-size: 8px;font-style: italic;padding: 16px 4px;}a.skip-main {left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999;}a.skip-main:focus, a.skip-main:active {color: #fff;background-color:#000;left: auto;top: auto;width: 30%;height: auto;overflow:auto;margin: 10px 35%;padding:5px;border-radius: 15px;border:4px solid yellow;text-align:center;font-size:1.2em;z-index:999;}@font-face {font-family: 'Raleway';font-style: normal;font-weight: 600;src: url('/s/inc/css/raleway-v18-latin-600.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-600.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-600.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-600.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-600.svg#Raleway') format('svg');}@font-face {font-family: 'Raleway';font-style: italic;font-weight: 400;src: url('/s/inc/css/raleway-v18-latin-italic.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-italic.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-italic.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-italic.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-italic.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-italic.svg#Raleway') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 400;src: url('/s/inc/css/roboto-mono-v12-latin-regular.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-regular.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-regular.svg#RobotoMono') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 600;src: url('/s/inc/css/roboto-mono-v12-latin-600.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-600.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-600.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-600.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-600.svg#RobotoMono') format('svg');}@font-face {font-family: 'Ubuntu';font-style: normal;font-weight: 400;src: url('/s/inc/css/ubuntu-v15-latin-regular.eot');src: local(''), url('/s/inc/css/ubuntu-v15-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/ubuntu-v15-latin-regular.woff2') format('woff2'), url('/s/inc/css/ubuntu-v15-latin-regular.woff') format('woff'), url('/s/inc/css/ubuntu-v15-latin-regular.ttf') format('truetype'), url('/s/inc/css/ubuntu-v15-latin-regular.svg#Ubuntu') format('svg');}@font-face {font-family:'Raleway2';font-style:normal;font-weight:normal;src:url('/s/inc/css/raleway.eot');src:local('Raleway2'),local('Raleway2'),url('/s/inc/css/raleway.ttf') }.headheader {font-family:"Raleway2"!important }.headheader a {color:#000;text-decoration:none }.headheader a:hover {color:#000;text-decoration:none!important }#toc ul {list-style: none;margin: 0;padding: 0;}#toc h3 {color:black;}</style>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />         
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAKCAYAAAD2Fg1xAAABgElEQVQ4jb3VP0iVYRTH8c9waXBokog7OYhTXChuF3GIi4hoiJA4REQIOTgGtoWTg6ODs0SYComIXCJEMhpKtD9guUU0ujRFS0PQ8DzC24v3Pq+3S9/pnMOP8/7Ocx6el/OziRN0JXTD+I2xhK4WdeNteGmbu8IgC3jQQlfCZ0zgINHzJabwoQP+ClHGV1zGJXwRDJ/FDJZi3MBQE10dL2K8gZFOGE3REDZyyjLunKG7KAzZHfMaXjXp+QbXYlzBfrvmSuhBNaHrxQU8zdQW8RhrOe0snuB7zA/jd6p4n9HV8QMfY/4JPzGAt7meFfS18LdXEk7uemIQuJ/Lj6PZQezFWhm3cTWnXcAj3MrU5oWh5WpzGM3UurGNZy28HSa8J7mB3Uy+4u/rl+UdrsT4Jraa6F6jP5M3MP0PHguzL9zzqmC2GRNYjXF2qDzDwgbgHp53wGMhJrEunGQ9oT3CQ+GFasWBsLVvwiv5XygJz/JOAe208POrJHST+CVspBB/AFY9Q3+QJqLxAAAAAElFTkSuQmCC" alt="Raymii.org Logo">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> 
                </small><br/><p>
                <link href="/s/_pagefind/pagefind-ui.css" rel="stylesheet">
                <script src="/s/_pagefind/pagefind-ui.js" type="text/javascript"></script>
                <div id="search" style="min-width:400px;max-width:1080px;"></div>
                <script>
                    window.addEventListener('DOMContentLoaded', (event) => {
                        new PagefindUI({ element: "#search" });
                    });
                </script>
                </p>
            </header>
          
    <main data-pagefind-body><h2 class='headheader' data-pagefind-meta='title' id='main'>Let's Encrypt with DirectAdmin or other Web Control Panels</h2>
<p><small>Published: <span data-pagefind-meta='date'>11-1-2015</span> | Last update: 24-02-2016 | Author: Remy van Elst | <a href="Lets_Encrypt_Directadmin.txt">Text only version of this article</a>
</small></p>
<br><div class='olderthanayear'><p><strong>&#10071; This post is over eight years old. It may no longer be up to date. Opinions may have changed.</strong></p></div>
<div id="toc">
<h3>Table of Contents</h3>
<ul>
<li>
<a href="#toc_0">What is Let&#39;s Encrypt</a>
</li>
<li>
<a href="#toc_1">Beta Program</a>
</li>
<li>
<a href="#toc_2">Installing the Let&#39;s Encrypt Client</a>
</li>
<li>
<a href="#toc_3">Manual mode</a>
</li>
<li>
<a href="#toc_4">Installing the certificates</a>
</li>
<li>
<a href="#toc_5">Renewing your certificate</a>
</li>
</ul>

</div><hr><div id="contents">
<p>Let&#39;s Encrypt is a new certificate authority, recognized by all major browsers.
They make it a breeze to set up TLS certificates for your web server. And for
free! Let&#39;s Encrypt is supported by major players like Mozilla, Akamai, Cisco,
the EFF, the Internet Security Research Group and others. Let&#39;s Encrypt provides
free, automatic and secure certificates so that every website can be secured
with an SSL certificate.</p>

<p><strong>Note: Directadmin has this build in since version 1.50.<a href="https://raymii.org/s/articles/Lets_Encrypt_Directadmin_Now_Built_In.html">I&#39;ve written a new
guide to set it up via the built in automatic way here</a>. This article is
still relevant for the manual way or other controlpanels, but the automatic way
is way more easy.</strong></p>

<p>Changelog:</p>

<ul>
<li>24-02-2016: add link to new automatic guide</li>
<li>10-12-2015: add <code>-d</code> multiple times for SAN certificate</li>
<li>07-12-2015: add <code>--webroot</code> option so you don&#39;t have to stop the server</li>
<li>05-12-2015: add symlink part and client is out of closed beta.</li>
<li>07-11-2015: first tutorial</li>
</ul>

<p>This article shows you how to setup Let&#39;s Encrypt with the DirectAdmin web
control panel. The guide is generic, so it works for other controlpanels as
well.</p>

<p class="ad"> <b>Recently I removed all Google Ads from this site due to their invasive tracking, as well as Google Analytics. Please, if you found this content useful, consider a small donation using any of the options below. It means the world to me if you  show your appreciation and you'll help pay the server costs:</b><br><br> <a href="https://github.com/sponsors/RaymiiOrg/">GitHub Sponsorship</a><br><br> <a href="https://pcbway.com/g/e7yQRg">PCBWay referral link (You get $5, I get $20 after you've placed an order)</a><br><br> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">Digital Ocea referral link  ($200 credit for 60 days. Spend $25 after your credit expires and I'll get $25!)</a><br><br> </p>

<p>First we talk a little bit on what Let&#39;s Encrypt is and how it works. We close
off with the actual certificate generation and installation.</p>

<p>For now it works with the beta, and required some linux knowledge and root
access to the hosting server. So this guide might change later on when the final
version is released. Also, Let&#39;s Encrypt tries to be as automatic as possible.
It however is not able to update the Apache (webserver) configuration for
Directadmin just yet. We therefore manually generate the certificate and use
Directadmin to place it under a website.</p>

<p>In the future this will hopefully be automated away. We do symlink the
certificate files after creation so that will make renewing them easier.</p>

<p>This guide also works for any generic web service where you need a certificate
(PEM) and a private key (PEM) file. The tutorial uses the <code>certOnly</code> option
which gets us these files. You can skip the DirectAdmin part and place (symlink)
the files in your Apache, NGINX or Lighttpd configuration and be done with it.</p>

<h3 id="toc_0">What is Let&#39;s Encrypt</h3>

<p>Let&#39;s Encrypt is a new certificate authority, recognized by all major browsers.
They make it a breeze to set up TLS certificates for your web server. And for
free! Let&#39;s Encrypt is supported by major players like Mozilla, Akamai, Cisco,
the EFF, the Internet Security Research Group and others. Let&#39;s Encrypt provides
free, automatic and secure certificates so that every website can be secured
with an SSL certificate.</p>

<p>For Let&#39;s Encrypt to issue you a certificate, you must prove to them that you
control the domain. If we own the domain, we can do this with a series of
<a href="https://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication">challenge-response</a> transactions, which is part of the <a href="https://github.com/letsencrypt/acme-spec">ACME protocol</a>.
Let&#39;s Encrypt <a href="https://letsencrypt.org/howitworks/technology/">explains this process well</a>.</p>

<p>With the ACME protocol there is an automated way to securely generate, renew and
revoke certificates.</p>

<p><img src="https://raymii.org/s/inc/img/letsencrypt_howitworks.png" alt="hiw"></p>

<p>The key principles behind Lets Encrypt are:</p>

<ul>
<li>Free: Anyone who owns a domain name can use Lets Encrypt to obtain a trusted certificate at zero cost.</li>
<li>Automatic: Software running on a web server can interact with Lets Encrypt to painlessly obtain a certificate, securely configure it for use, and automatically take care of renewal.</li>
<li>Secure: Lets Encrypt will serve as a platform for advancing TLS security best practices, both on the CA side and by helping site operators properly secure their servers.</li>
<li>Transparent: All certificates issued or revoked will be publicly recorded and available for anyone to inspect.</li>
<li>Open: The automatic issuance and renewal protocol will be published as an open standard that others can adopt.</li>
<li>Cooperative: Much like the underlying Internet protocols themselves, Lets Encrypt is a joint effort to benefit the community, beyond the control of any one organization.</li>
</ul>

<p><a href="https://letsencrypt.org/about/">Source</a></p>

<h3 id="toc_1">Beta Program</h3>

<p>Let&#39;s Encrypt is in beta right now. This means it might not work, or might not
work as expected. So don&#39;t use it on production just yet.</p>

<p>If you really need an SSL certificate, <a href="https://gogetssl.com">GoGetSSL</a> provides the cheapest ones,
$3 something for a whole year comodo domain validation certificate. Other
providers as well, no sponsoring here. (no referral link)</p>

<p>Since the 3rd of december 2015 the closed beta is over and you don&#39;t need an
invite anymore. There are limit&#39;s on the API though:</p>

<ul>
<li>Rate limit on registrations per IP: 10 per 3 hours</li>
<li>Rate limit on certificates per Domain: 5 per 7 days</li>
</ul>

<p>~~Read the article here on the beta program:
<a href="https://raymii.org/s/inc/img/letsencrypt_howitworks.png">https://community.letsencrypt.org/t/beta-program-announcements/1631</a> and
follow the instructions to sign up. I&#39;ve got my invitation about 3 days after I
signed up, yours might be faster.~~</p>

<h3 id="toc_2">Installing the Let&#39;s Encrypt Client</h3>

<p>The installation is pretty straightforward. It does require SSH access to your
Directadmin host, so that might not be available if you&#39;re on a shared hosting
server. There is a manual way to authenticate the domain, that is also
explained. You can run the client somewhere else and place the result, via SFTP,
on your shared hosting account to complete the challenge.</p>

<p>First make sure you have git installed:</p>

<pre><code># ubuntu &amp; debian
apt-get install git
# centos &amp; redhat
yum install git
</code></pre>

<p>Clone the Let&#39;s Encrypt code:</p>

<pre><code>git clone https://github.com/letsencrypt/letsencrypt
cd letsencrypt
</code></pre>

<p>Since December 2015 the client supports the <code>--webroot</code> option, so your
webserver doesn&#39;t need to be brought down.</p>

<p>The below part doesn&#39;t apply anymore.</p>

<p>~~Now, Let&#39;s Encrypt binds to the HTTP port (80) to do the Domain Validatiopn
sequence. You must stop your web server for a few moments to do this. Your
website will be offline, but it will be for a minute at max.~~ ~~Directadmin
also has a service monitor where we must indicate that HTTPD is offline,
otherwise it will restart it and the process might fail:~~</p>

<pre><code>sed -i &#39;s/httpd=ON/httpd=OFF/g&#39; /usr/local/directadmin/data/admin/services.status
service httpd stop
</code></pre>

<p>~~If you don&#39;t want or are not able to take down all sites or bind to port 80,
scroll down below for a manual command.~~</p>

<p>If you are not able to execute the client on the actual webserver, a shared
hosting account without ssh or are behind a firewall or loadbalancer, read on
below for a manual method.</p>

<p>You need to provide your webroot path. The client places the authentication
challenge files there to do the actual certificate domain ownership validation.
You can find that in your webserver configuration. For directadmin it&#39;s like
this: <code>/home/USERNAME/domains/DOMAIN.EXT/public_html</code>.</p>

<p>Also don&#39;t forget to fill in your correct email address.</p>

<p>Execute the Let&#39;s Encrypt command to get the certificate:</p>

<pre><code>./letsencrypt-auto --server https://acme-v01.api.letsencrypt.org/directory certonly --agree-tos --email &#39;user@domain.tld&#39; --webroot --webroot-path &#39;/home/certmon/domains/certificatemonitor.org/public_html/&#39; -d certificatemonitor.org -d www.certificatemonitor.org
</code></pre>

<p>If you are using an older Python version, for example Python 2.6 on CentOS 6,
add the <code>--debug</code> option as the client will tell you.</p>

<p>If you need a certificate with multiple subdomains or with <code>www.domain.tld</code> and
<code>domain.tld</code>, specify the <code>-d domain</code> option multiple times. Make sure the
webroot is the same. If you only need one domain, change the example and remove
the last <code>-d</code> option.</p>

<p>The client will then do a bit of work with the Lets Encrypt service to validate
domain ownership.</p>

<p>If all goes well it will print out the below message:</p>

<pre><code>Version: 1.1-20080819
Version: 1.1-20080819

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at
   /etc/letsencrypt/live/certificatemonitor.org/fullchain.pem. Your cert
   will expire on 2016-03-06. To obtain a new version of the
   certificate in the future, simply run Let&#39;s Encrypt again.
 - If like Let&#39;s Encrypt, please consider supporting our work by:

   Donating to ISRG / Let&#39;s Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
</code></pre>

<p>If not, try again. Otherwise you might be hit by a beta bug.</p>

<p>Now turn on the webserver:</p>

<pre><code>sed -i &#39;s/httpd=OFF/httpd=ON/g&#39; /usr/local/directadmin/data/admin/services.status
service httpd start
</code></pre>

<p>I had to disable the CloudFlare protection service, before that I got the
following error:</p>

<pre><code>FailedChallenges: Failed authorization procedure. www.certificatemonitor.org (dvsni): tls :: The server experienced a TLS error during DV :: Failed to connect to host for DVSNI challenge, certificatemonitor.org (dvsni): tls :: The server experienced a TLS error during DV :: Failed to connect to host for DVSNI challenge
</code></pre>

<p>You now have the certificate from Let&#39;s Encrypt. Lets proceed with the
installation.</p>

<h3 id="toc_3">Manual mode</h3>

<p>If you have a loadbalancer or something else where you run the client NOT on the
actual webserver, you can use the <code>-a manual</code> command line flag. You enter your
email and domain, then the program displays the following:</p>

<pre><code>Make sure your web server displays the following content at
http://www.certificatemonitor.org/.well-known/acme-challenge/1Qm[...]NHr0 before continuing:

1Qm[...]SA8

Content-Type header MUST be set to text/plain.

If you don&#39;t have HTTP server configured, you can run the following
command on the target server (as root):

mkdir -p /tmp/letsencrypt/public_html/.well-known/acme-challenge
cd /tmp/letsencrypt/public_html
printf &quot;%s&quot; 1Qm[...]SA8 &gt; .well-known/acme-challenge/1Qm[...]Hr0
# run only once per server:
$(command -v python2 || command -v python2.7 || command -v python2.6) -c \
&quot;import BaseHTTPServer, SimpleHTTPServer; \
SimpleHTTPServer.SimpleHTTPRequestHandler.extensions_map = {&#39;&#39;: &#39;text/plain&#39;}; \
s = BaseHTTPServer.HTTPServer((&#39;&#39;, 80), SimpleHTTPServer.SimpleHTTPRequestHandler); \
s.serve_forever()&quot; 
</code></pre>

<p>You need not to press ENTER just yet. Create or upload the page requested to
your domain and test it in a browser (via SFTP, for example). You might want to
use the python command. You can also use <code>curl</code>:</p>

<pre><code>curl http://www.certificatemonitor.org/.well-known/acme-challenge/1Qm[...]NHr0
</code></pre>

<p>If you get the requested string back you&#39;re good to go. Press ENTER on the
prompt and the validation will occur. If you placed the file on the correct
place, it will succeed with the same output as above. If it failed, you will
receive an <code>Authorization Error</code>.</p>

<p>If you use the python script or watch your logs, you&#39;ll see something like this
doing the verification:</p>

<pre><code>outbound1.letsencrypt.org - - [07/Nov/2015 15:34:01] &quot;GET /.well-known/acme-challenge/1Qm[...]Hr0 HTTP/1.1&quot; 200 -
</code></pre>

<p>After succeeding, read on to install the certificates.</p>

<h3 id="toc_4">Installing the certificates</h3>

<p>We generated a certificate, Let&#39;s Encrypt validated us and returned the
certificates, all automatically. The certificates are placed on your system and
you can check them with the following command:</p>

<pre><code>ls -la /etc/letsencrypt/live/certificatemonitor.org/
</code></pre>

<p>Replace certificatemonitor.org with your own domain. Output:</p>

<pre><code>total 8
drwx------ 3 root root 4096 Nov  7 07:26 ..
lrwxrwxrwx 1 root root   49 Nov  7 07:34 privkey.pem -&gt; ../../archive/certificatemonitor.org/privkey2.pem
lrwxrwxrwx 1 root root   51 Nov  7 07:34 fullchain.pem -&gt; ../../archive/certificatemonitor.org/fullchain2.pem
lrwxrwxrwx 1 root root   47 Nov  7 07:34 chain.pem -&gt; ../../archive/certificatemonitor.org/chain2.pem
lrwxrwxrwx 1 root root   46 Nov  7 07:34 cert.pem -&gt; ../../archive/certificatemonitor.org/cert2.pem
</code></pre>

<p>As we can see they symlinked the files there. If you configure your own
webserver manually, you can give these files as the location in your apace or
nginx config. When you renew the certificate later on, you don&#39;t have to update
the webserver config, just a reload/restart.</p>

<p>Get the contents of the certificate, private key and chain with the following
commands. Remember to replace certificatemonitor.org with your domain:</p>

<pre><code>cat /etc/letsencrypt/live/certificatemonitor.org/cert.pem
cat /etc/letsencrypt/live/certificatemonitor.org/privkey.pem
cat /etc/letsencrypt/live/certificatemonitor.org/chain.pem
</code></pre>

<p>Save the contents in a text editor somewhere, you need these in DirectAdmin.</p>

<p>After you&#39;ve installed the certificates in the controlpanel (DirectAdmin), we
need to symlink those files to the Lets Encrypt files so that auto renewal works
better. We do need to first install them via the control panel so that the
configuration gets updated in the correct way. Most controlpanels overwrite
manual changes.</p>

<p>Login to your Directadmin control panel and navigate to your website. Under
&quot;Advanced Features&quot; click &quot;SSL Certificates&quot;.</p>

<p>Select the radio button for the <code>Paste a pre-generated certificate and key</code>
option. In the textfield below, first paste the contents of the <code>cert.pem</code> file.
Below that, paste the contents of the <code>privkey.pem</code> file.</p>

<p><img src="https://raymii.org/s/inc/img/le-da-1.png" alt="le-da1"></p>

<p>Click the Save button. Now go back to the main domain screen, and navigate to
&quot;Advanced Features&quot; --&gt; &quot;SSL Certificates&quot; again. Scroll down and open the link
<code>Click Here to paste a CA Root Certificate</code>. Mark the checkbox <code>Use a CA Cert.</code>
and paste the contents of the <code>chain.pem</code> file there:</p>

<p><img src="https://raymii.org/s/inc/img/le-da-2.png" alt="le-da2"></p>

<p>Click the Save button.</p>

<p>If you haven&#39;t already enabled SSL for your domain, do that now. Navigate to the
main domain screen. Click &quot;Domain Setup&quot;. Open your domain. Mark the <code>Secure
SSL</code> checkbox and click the Save button. Now, under <code>private_html setup for
certificatemonitor.org - (SSL must be enabled above)</code> mark the radio button <code>Use
a symbolic link from private_html to public_html - allows for same data in http
and https</code> and click the save button again:</p>

<p><img src="https://raymii.org/s/inc/img/le-da-3.png" alt="le-da3"></p>

<p>Now navigate to <code>https://yourdomain</code> and behold Let&#39;s Encrypt in all it&#39;s glory.
Well, actually, you should just see your own website with a valid SSL
certificate:</p>

<p><img src="https://raymii.org/s/inc/img/le-valid.png" alt="le-da4"></p>

<p>You can check it with an SSL validator like <a href="https://ssllabs.com/">the SSL server test from qually
labs</a> or my own SSL test: <a href="https://ssldecoder.org">https://ssldecoder.org</a>.</p>

<p>Make sure to also setup a secure cipherlist and other secure SSL settings. Read
up on the current best practice here: <a href="https://cipherli.st">https://cipherli.st</a>.</p>

<p>For other Control Panels, like cPanel, VestaCP, Plesk and Webmin, this process
is the same. Look up their documentation on installing a certificate, and use
the files Let&#39;s Encrypt generated for you.</p>

<p>We&#39;re now going to symlink the certificates so that auto renewal works when the
Let&#39;s Encrypt client supports it. Because we symlink, the files will be updated
automatically. We do need to first install the certificates the control-panel
way, otherwise our manual changes might be overwritten.</p>

<p>You need to check the apache configuration to find the certificate file paths.
Use <code>httpd -S</code> to get the current configuration in use. Some distro&#39;s use
<code>apachectl -S</code> instead of <code>httpd -S</code>:</p>

<p>httpd -S 2&gt;&amp;1 | grep 443 | grep certificatemonitor</p>

<p>Example output:</p>

<pre><code>port 443 namevhost www.certificatemonitor.org (/usr/local/directadmin/data/users/certmon/httpd.conf:55)
</code></pre>

<p>Use the following command to get the SSL certificate file locations from the
config file:</p>

<pre><code>grep SSL /usr/local/directadmin/data/users/certmon/httpd.conf
</code></pre>

<p>Example output:</p>

<pre><code>SSLEngine on
SSLCertificateFile /usr/local/directadmin/data/users/certmon/domains/certificatemonitor.org.cert
SSLCertificateKeyFile /usr/local/directadmin/data/users/certmon/domains/certificatemonitor.org.key
SSLCACertificateFile /usr/local/directadmin/data/users/certmon/domains/certificatemonitor.org.cacert
</code></pre>

<p>With the following commands we symlink the certificates to the Let&#39;s Encrypt
path:</p>

<pre><code># remember, ln -s syntax is: ln -s /path/to/file /path/to/symlink
ln -s /etc/letsencrypt/live/certificatemonitor.org/cert.pem /usr/local/directadmin/data/users/certmon/domains/certificatemonitor.org.cert
ln -s /etc/letsencrypt/live/certificatemonitor.org/privkey.pem /usr/local/directadmin/data/users/certmon/domains/certificatemonitor.org.key
ln -s /etc/letsencrypt/live/certificatemonitor.org/chain.pem /usr/local/directadmin/data/users/certmon/domains/certificatemonitor.org.cacert 
</code></pre>

<p>If you get an error about a file already existing, remove the files first before
creating the symlink.</p>

<p>Tha&#39;s it! You&#39;re done, you&#39;ve installed a valid Lets Encrypt certificate for
your domain. Awesome!.</p>

<p>Just one more important thing.</p>

<h3 id="toc_5">Renewing your certificate</h3>

<p>After 90 day&#39;s, your certificate expires. With Let&#39;s Encrypt, that is not a
problem. Why? Because the goal of the project is to automate this whole process.
When the product is finished and out of beta, it will renew the certificate
automatically when it is about to expire, so you don&#39;t have to do anything.</p>

<p>For now, that is not the case, since we&#39;re running the beta. Your certificate
will expire in 90 days. Make sure to setup a reminder in your calendar a few
days before, or use my certificate expiry reminder service:
<a href="https://certificatemonitor.org/">https://certificatemonitor.org/</a>. (That will send you a few mails before your
certificate expires).</p>

<p>When the 90 days are almost up, come back to this page and execute the Let&#39;s
Encrypt command again with the correct domain and webroot options. You&#39;ll be
asked if you want to renew, agree, and the certificate will be renewed. Then
restart the webserver via a <code>service httpd restart</code>. Repeat is for all
certificates.</p>

<p><a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out a Digital Ocean
VPS. With this link you&#39;ll get a $5 VPS for 2 months free (as in, you get $10
credit). (referral link)</a></p>

<p>If you still have any questions or suggestions, shoot me a message. Check the
About page for my details.</p>
Tags: <a href="../tags/apache.html">apache</a>
, <a href="../tags/articles.html">articles</a>
, <a href="../tags/centos.html">centos</a>
, <a href="../tags/certificate.html">certificate</a>
, <a href="../tags/cpanel.html">cpanel</a>
, <a href="../tags/directadmin.html">directadmin</a>
, <a href="../tags/nginx.html">nginx</a>
, <a href="../tags/openssl.html">openssl</a>
, <a href="../tags/plesk.html">plesk</a>
, <a href="../tags/ssl.html">ssl</a>
, <a href="../tags/tls.html">tls</a>
</div></main>
<br/>
<footer>
<br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small>
                </p>
    
    </footer>
    <script data-goatcounter="https://raymii.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>

    <script defer src="/s/inc/js/instant.5.2.0.js"  type="module" ></script>

     
    </main>
    </body>
    </html>
    