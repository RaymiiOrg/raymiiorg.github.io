
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Olimex OlinuXino a10 Lime uBoot, Kernel and root image guide - Raymii.org</title>
        <style> *, ::before, ::after {background-repeat: no-repeat;-webkit-box-sizing: border-box;box-sizing: border-box;}::before, ::after {text-decoration: inherit;vertical-align: inherit;}html {cursor: default;font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.15;-moz-tab-size: 4;-o-tab-size: 4;tab-size: 4;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;word-break: break-word;}body {background-color: white;margin: 0;}h1 {font-size: 2em;margin: 0.67em 0;}hr {height: 0;overflow: visible;}main {display: block;}nav ol, nav ul {list-style: none;}pre {font-family: Roboto Mono, Menlo, Consolas, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}a {background-color: transparent;}abbr[title] {text-decoration: underline;-webkit-text-decoration: underline dotted;text-decoration: underline dotted;}b, strong {font-weight: bolder;}code, kbd, samp {font-family: Menlo, Consolas, Roboto Mono, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}small {font-size: 80%;}::-moz-selection {background-color: #b3d4fc;color: #000;text-shadow: none;}::selection {background-color: #b3d4fc;color: #000;text-shadow: none;}audio, canvas, iframe, img, svg, video {vertical-align: middle;}audio, video {display: inline-block;}audio:not([controls]) {display: none;height: 0;}img {border-style: none;}svg:not([fill]) {fill: currentColor;}svg:not(:root) {overflow: hidden;}table {border-collapse: collapse;}button, input, select, textarea {font-family: inherit;font-size: inherit;line-height: inherit;}button, input, select {margin: 0;}button {overflow: visible;text-transform: none;}button, [type="button"], [type="reset"], [type="submit"] {-webkit-appearance: button;}fieldset {padding: 0.35em 0.75em 0.625em;}input {overflow: visible;}legend {color: inherit;display: table;max-width: 100%;white-space: normal;}progress {display: inline-block;vertical-align: baseline;}select {text-transform: none;}textarea {margin: 0;overflow: auto;resize: vertical;}[type="checkbox"], [type="radio"] {padding: 0;}[type="search"] {-webkit-appearance: textfield;outline-offset: -2px;}::-webkit-inner-spin-button, ::-webkit-outer-spin-button {height: auto;}::-webkit-input-placeholder {color: inherit;opacity: 0.54;}::-webkit-search-decoration {-webkit-appearance: none;}::-webkit-file-upload-button {-webkit-appearance: button;font: inherit;}::-moz-focus-inner {border-style: none;padding: 0;}:-moz-focusring {outline: 1px dotted ButtonText;}details {display: block;}dialog {background-color: white;border: solid;color: black;display: block;height: -moz-fit-content;height: -webkit-fit-content;height: fit-content;left: 0;margin: auto;padding: 1em;position: absolute;right: 0;width: -moz-fit-content;width: -webkit-fit-content;width: fit-content;}dialog:not([open]) {display: none;}summary {display: list-item;}canvas {display: inline-block;}template {display: none;}a, area, button, input, label, select, summary, textarea, [tabindex] {-ms-touch-action: manipulation;touch-action: manipulation;}[hidden] {display: none;}[aria-busy="true"] {cursor: progress;}[aria-controls] {cursor: pointer;}[aria-disabled="true"], [disabled] {cursor: not-allowed;}[aria-hidden="false"][hidden]:not(:focus) {clip: rect(0, 0, 0, 0);display: inherit;position: absolute;}main, header, footer, article, section, aside, details, summary {margin: 0 auto;margin-bottom: 16px;width: 100%;}main {display: block;margin: 0 auto;max-width: 1000px;padding: 0 16px 16px;}footer {border-top: 1px solid rgba(0, 0, 0, 0.12);padding: 16px 0;text-align: left;}footer p {margin-bottom: 0;}hr {border: 0;border-top: 1px solid rgba(0, 0, 0, 0.12);display: block;margin-top: 16px;margin-bottom: 16px;width: 100%;-webkit-box-sizing: content-box;box-sizing: content-box;height: 0;overflow: visible;}img {height: auto;max-width: 100%;vertical-align: baseline;}@media screen and (max-width: 400px) {article, section, aside {clear: both;display: block;max-width: 100%;}img {margin-right: 16px;}}embed, iframe, video {border: 0;}body {color: rgba(0, 0, 0, 0.8);font-family: "Ubuntu", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size: 16px;line-height: 1.5;}p {margin: 0;margin-bottom: 16px;}h1, h2, h3, h4, h5, h6 {color: inherit;font-family: inherit;line-height: 1.2;font-weight: 500;}h1 {font-size: 40px;margin: 20px 0 16px;}h2 {font-size: 32px;margin: 20px 0 16px;}h3 {color: #75cc00;font-size: 28px;margin: 16px 0 4px;}h4 {color: #75cc00;font-size: 24px;margin: 16px 0 4px;}h5 {color: #75cc00;font-size: 20px;margin: 16px 0 4px;}h6 {color: #75cc00;font-size: 16px;margin: 16px 0 4px;}small {color: rgba(0, 0, 0, 0.54);vertical-align: bottom;}pre {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);display: block;font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;margin: 16px 0;padding: 16px;white-space: pre-wrap;overflow-wrap: break-word;}code {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;line-height: inherit;margin: 0;vertical-align: baseline;word-break: break-all;word-wrap: break-word;}a {color: #75cc00;text-decoration: none;background-color: transparent;}a:hover, a:focus {color: #0062cc;font-weight: bolder;text-decoration: underline;}dl {margin-bottom: 16px;}dd {margin-left: 40px;}ul, ol {margin-bottom: 8px;padding-left: 40px;vertical-align: baseline;}blockquote {border-left: 2px solid rgba(0, 0, 0, 0.8);font-family: Georgia, Times, "Times New Roman", serif;font-style: italic;margin: 16px 0;padding-left: 16px;}figcaption {font-family: Georgia, Times, "Times New Roman", serif;}u {text-decoration: underline;}s {text-decoration: line-through;}sup {font-size: 14px;vertical-align: super;}sub {font-size: 14px;vertical-align: sub;}mark {background: #ffeb3b;}input[type="text"], input[type="password"], input[type="email"], input[type="url"], input[type="date"], input[type="month"], input[type="time"], input[type="datetime"], input[type="datetime-local"], input[type="week"], input[type="number"], input[type="search"], input[type="tel"], select, textarea {background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}input[type="color"] {background: #fff;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;display: inline-block;vertical-align: middle;}input:not([type]) {-webkit-appearance: none;background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;text-align: left;}input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="url"]:focus, input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus, input[type="week"]:focus, input[type="number"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus, select:focus, textarea:focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input:not([type]):focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus {outline: 1px thin rgba(0, 0, 0, 0.12);}input[type="text"][disabled], input[type="password"][disabled], input[type="email"][disabled], input[type="url"][disabled], input[type="date"][disabled], input[type="month"][disabled], input[type="time"][disabled], input[type="datetime"][disabled], input[type="datetime-local"][disabled], input[type="week"][disabled], input[type="number"][disabled], input[type="search"][disabled], input[type="tel"][disabled], input[type="color"][disabled], select[disabled], textarea[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input:not([type])[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input[readonly], select[readonly], textarea[readonly] {border-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);}input:focus:invalid, textarea:focus:invalid, select:focus:invalid {border-color: #ea1c0d;color: #f44336;}input[type="file"]:focus:invalid:focus, input[type="radio"]:focus:invalid:focus, input[type="checkbox"]:focus:invalid:focus {outline-color: #f44336;}select {border: 1px solid rgba(0, 0, 0, 0.12);vertical-align: sub;}select:not([size]):not([multiple]) {height: -webkit-calc(2.25rem + 2px);height: calc(2.25rem + 2px);}select[multiple] {height: auto;}label {display: inline-block;line-height: 2;}fieldset {border: 0;margin: 0;padding: 8px 0;}legend {border-bottom: 1px solid rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.8);display: block;margin-bottom: 8px;padding: 8px 0;width: 100%;}textarea {overflow: auto;resize: vertical;}input[type=checkbox], input[type=radio] {-webkit-box-sizing: border-box;box-sizing: border-box;padding: 0;display: inline;}input[type=submit], input[type=reset], input[type=button], button {background-color: #75cc00;border: #75cc00;border-radius: 4px;color: #fff;padding: 8px 16px;display: inline-block;font-weight: 400;text-align: center;white-space: nowrap;vertical-align: middle;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;border: 1px solid transparent;font-size: 1rem;line-height: 1.5;-webkit-transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;}input[type=submit]::-moz-focus-inner, input[type=reset]::-moz-focus-inner, input[type=button]::-moz-focus-inner, button::-moz-focus-inner {padding: 0;}input[type=submit]:hover, input[type=reset]:hover, input[type=button]:hover, button:hover {background-color: #0069d9;border-color: #0062cc;color: #fff;}input[type=submit]:not(:disabled):active, input[type=reset]:not(:disabled):active, input[type=button]:not(:disabled):active, button:not(:disabled):active {background-color: #0062cc;border-color: #005cbf;color: #fff;}input[type=submit]:focus, input[type=reset]:focus, input[type=button]:focus, button:focus {outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);}input[type=submit]:disabled, input[type=reset]:disabled, input[type=button]:disabled, button:disabled {opacity: .65;cursor: not-allowed;background-color: #75cc00;border-color: #75cc00;color: #fff;}table {border-top: 1px solid rgba(0, 0, 0, 0.12);margin-bottom: 16px;}caption {padding: 8px 0;}thead th {border: 0;border-bottom: 2px solid rgba(0, 0, 0, 0.12);text-align: left;}tr {margin-bottom: 8px;}th, td {border-bottom: 1px solid rgba(0, 0, 0, 0.12);padding: 16px;white-space: nowrap;vertical-align: inherit;}tfoot tr {text-align: left;}tfoot td {color: rgba(0, 0, 0, 0.54);font-size: 8px;font-style: italic;padding: 16px 4px;}a.skip-main {left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999;}a.skip-main:focus, a.skip-main:active {color: #fff;background-color:#000;left: auto;top: auto;width: 30%;height: auto;overflow:auto;margin: 10px 35%;padding:5px;border-radius: 15px;border:4px solid yellow;text-align:center;font-size:1.2em;z-index:999;}@font-face {font-family: 'Raleway';font-style: normal;font-weight: 600;src: url('/s/inc/css/raleway-v18-latin-600.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-600.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-600.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-600.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-600.svg#Raleway') format('svg');}@font-face {font-family: 'Raleway';font-style: italic;font-weight: 400;src: url('/s/inc/css/raleway-v18-latin-italic.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-italic.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-italic.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-italic.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-italic.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-italic.svg#Raleway') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 400;src: url('/s/inc/css/roboto-mono-v12-latin-regular.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-regular.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-regular.svg#RobotoMono') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 600;src: url('/s/inc/css/roboto-mono-v12-latin-600.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-600.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-600.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-600.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-600.svg#RobotoMono') format('svg');}@font-face {font-family: 'Ubuntu';font-style: normal;font-weight: 400;src: url('/s/inc/css/ubuntu-v15-latin-regular.eot');src: local(''), url('/s/inc/css/ubuntu-v15-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/ubuntu-v15-latin-regular.woff2') format('woff2'), url('/s/inc/css/ubuntu-v15-latin-regular.woff') format('woff'), url('/s/inc/css/ubuntu-v15-latin-regular.ttf') format('truetype'), url('/s/inc/css/ubuntu-v15-latin-regular.svg#Ubuntu') format('svg');}@font-face {font-family:'Raleway2';font-style:normal;font-weight:normal;src:url('/s/inc/css/raleway.eot');src:local('Raleway2'),local('Raleway2'),url('/s/inc/css/raleway.ttf') }.headheader {font-family:"Raleway2"!important }.headheader a {color:#000;text-decoration:none }.headheader a:hover {color:#000;text-decoration:none!important }#toc ul {list-style: none;margin: 0;padding: 0;}#toc h3 {color:black;}</style>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAKCAYAAAD2Fg1xAAABgElEQVQ4jb3VP0iVYRTH8c9waXBokog7OYhTXChuF3GIi4hoiJA4REQIOTgGtoWTg6ODs0SYComIXCJEMhpKtD9guUU0ujRFS0PQ8DzC24v3Pq+3S9/pnMOP8/7Ocx6el/OziRN0JXTD+I2xhK4WdeNteGmbu8IgC3jQQlfCZ0zgINHzJabwoQP+ClHGV1zGJXwRDJ/FDJZi3MBQE10dL2K8gZFOGE3REDZyyjLunKG7KAzZHfMaXjXp+QbXYlzBfrvmSuhBNaHrxQU8zdQW8RhrOe0snuB7zA/jd6p4n9HV8QMfY/4JPzGAt7meFfS18LdXEk7uemIQuJ/Lj6PZQezFWhm3cTWnXcAj3MrU5oWh5WpzGM3UurGNZy28HSa8J7mB3Uy+4u/rl+UdrsT4Jraa6F6jP5M3MP0PHguzL9zzqmC2GRNYjXF2qDzDwgbgHp53wGMhJrEunGQ9oT3CQ+GFasWBsLVvwiv5XygJz/JOAe208POrJHST+CVspBB/AFY9Q3+QJqLxAAAAAElFTkSuQmCC" alt="Raymii.org Logo">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> | 
                  <a href="gopher://raymii.org:70">Gopher</a>
                </small>
            </header>
          
    <h2 class='headheader' id='main'>Olimex OlinuXino a10 Lime uBoot, Kernel and root image guide</h2>
<p><small>Published: 20-12-2014 | Author: Remy van Elst | <a href="Olimex_OlinuXino _10 Lime_uBoot_Kernel.txt">Text only version of this article</a>
</small></p>
<div class='ad'>
                                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7993642564731324"
                             crossorigin="anonymous"></script>
                        <!-- voorartikel -->
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-7993642564731324"
                             data-ad-slot="6172324376"
                             data-ad-format="auto"></ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                        </div><br><div class='olderthanayear'><p><strong>&#10071; This post is over seven years old. It may no longer be up to date. Opinions may have changed.</strong></p></div>
<div id="toc">
<h3>Table of Contents</h3>
<ul>
<li>
<a href="#toc_0">Contents</a>
</li>
<li>
<a href="#toc_1">Install required packages</a>
</li>
<li>
<a href="#toc_2">Building Uboot</a>
</li>
<li>
<a href="#toc_3">Building the kernel</a>
</li>
<li>
<a href="#toc_4">Format and setup the SD-card</a>
</li>
<li>
<a href="#toc_5">Writing the bootloader and related files</a>
</li>
<li>
<a href="#toc_6">Debian rootfs</a>
</li>
</ul>

</div><hr><div id="contents">
<p><img src="https://raymii.org/s/inc/img/A10-OLinuXino-LIME.jpeg" alt="olimex"></p>

<p>The Olimex OlinuXino A10 LIME is an amazing, powerfull and cheap open source ARM
development board. It costs EUR 30, and has 160 GPIO. This guide is a cleaned up
version of theirs with instructions to build your own kernel and u-boot image on
Ubuntu 14.04</p>

<p>Buy the board here: and see my other tutorials and a small image here:
<a href="https://raymii.org/s/tags/olimex.html">https://raymii.org/s/tags/olimex.html</a></p>

<p class="ad"> <a href="https://leafnode.nl">I'm developing an open source monitoring app called  Leaf Node Monitoring, for windows, linux & android. Go check it out!</a><br><br> <a href="https://github.com/sponsors/RaymiiOrg/">Consider sponsoring me on Github. It means the world to me if you show your appreciation and you'll help pay the server costs.</a><br><br> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">You can also sponsor me by getting a Digital Ocean VPS. With this referral link you'll get $100 credit for 60 days. </a><br><br> </p>

<p>The original guide can be found here:</p>

<p>This guide has been adapted to work on Ubuntu 14.04, some package names,
instructions and commands were incorrect. Also, all the files are not on Google
drive anymore, but on my servers. The original bad english has been cleaned up
to be less bad. The guide however is of less quality than you normally get from
me.</p>

<p>For Allwinner Kernel related questions please ask on Linux Sunxi Mailing List in
Google Groups: <a href="https://groups.google.com/forum/#!forum/linux-sunxi">https://groups.google.com/forum/#!forum/linux-sunxi</a></p>

<p>For Uboot related questions please ask on Linux Sunxi Mailing List in Google
Groups: <a href="https://groups.google.com/forum/#!forum/linux-sunxi">https://groups.google.com/forum/#!forum/linux-sunxi</a></p>

<hr>

<h3 id="toc_0">Contents</h3>

<ul>
<li>Building u-boot (boat loader)</li>
<li>Building the kernel</li>
<li>Partitioning the SD card</li>
<li>Placing the bootloader, kernel and kernel modules</li>
<li>Placing the root filesystem</li>
</ul>

<h3 id="toc_1">Install required packages</h3>

<p>Install the toolchain and other required development packages:</p>

<pre><code>apt-get update
apt-get install gcc-4.7-arm-linux-gnueabihf ncurses-dev build-essential git u-boot-tools gcc-arm-linux-gnueabihf
</code></pre>

<p>If you want to cross compile on Debian instead of Ubuntu, you need the following
set of packages:</p>

<pre><code>apt-get install binutils-arm-linux-gnueabihf ncurses-dev build-essential git u-boot-tools gcc-arm-linux-gnueabihf
</code></pre>

<p>Create a working directory and go in to it:</p>

<pre><code>mkdir A10_kernel_3.4/
cd A10_kernel_3.4/
</code></pre>

<h3 id="toc_2">Building Uboot</h3>

<p>u-boot is the bootloader, it is a GRUB alternative for small/embedded systems.</p>

<p>Download u-boot sources:</p>

<pre><code>git clone -b sunxi https://github.com/linux-sunxi/u-boot-sunxi.git
cd u-boot-sunxi/
</code></pre>

<p>Note that this guide was written with the revision below:</p>

<pre><code>git rev-parse --verify HEAD
44b53fd3928f15c34993ec8c6b8c2efcb79769ee
</code></pre>

<p>Start the uboot build:</p>

<pre><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- distclean
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- A10-OLinuXino-Lime_config
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-
</code></pre>

<p>At the end of the process you should have at least the following files:</p>

<pre><code># ls u-boot.bin u-boot-sunxi-with-spl.bin spl/sunxi-spl.bin
spl/sunxi-spl.bin  u-boot.bin  u-boot-sunxi-with-spl.bin
</code></pre>

<p>Go back into the working directory:</p>

<pre><code>cd ..
</code></pre>

<h3 id="toc_3">Building the kernel</h3>

<p>Kernel sources for A10 are available on GitHub. Use git to download the kernel
sources for the board:</p>

<pre><code>git clone https://github.com/linux-sunxi/linux-sunxi
cd linux-sunxi/
</code></pre>

<p>Note that this guide was written with the revision below:</p>

<pre><code>git rev-parse --verify HEAD
e37d760b363888f3a65cd6455c99a75cac70a7b8
</code></pre>

<p>The following file contains all the kernel config settings. If you&#39;ve ever built
your own kernel you can use <code>make menuconfig</code> etc to change the settings. For
now, download it:</p>

<pre><code>wget https://raymii.org/s/inc/downloads/olinux/a10/a10lime_defconfig
</code></pre>

<p>Their kernel contains weird choices, for example iptables is not available, but
wireless drivers are. You can save space on the kernel by removing things like
that. If you want to run it as a server, you need to compile most of the network
settings back in. I use the following config, with network stuff included so
that I can use <code>lxc</code> containers on the board (<code>veth</code>, <code>bridge</code> and <code>vlan</code>
support etc.):</p>

<pre><code>wget https://raymii.org/s/inc/downloads/olinux/a10/kernel_config_raymii
</code></pre>

<p>Copy a10lime_defconfig file to config directory:</p>

<pre><code>cp a10lime_defconfig linux-sunxi/arch/arm/configs/
# or my config:
cp kernel_config_raymii linux-sunxi/arch/arm/configs/
</code></pre>

<p>Prepare the config file:</p>

<pre><code>make ARCH=arm a10lime_defconfig
</code></pre>

<p>The result should be:</p>

<pre><code>configuration written to .config
</code></pre>

<p>If you wish to make your changes in the kernel configuration do:</p>

<pre><code>make ARCH=arm menuconfig
</code></pre>

<p>You can add or remove different modules for the different peripherials in the
kernel with <code>menuconfig</code>. Be careful with this as it may cause the kernel to not
work properly.</p>

<p>Compile the kernel:</p>

<pre><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j4 uImage
</code></pre>

<p>The result after a while should be like this:</p>

<pre><code>Image Name:   Linux-3.4.90+
Created:      Fri Jun 13 16:28:39 2014
Image Type:   ARM Linux Kernel Image (uncompressed)
Data Size:    4447440 Bytes = 4343.20 kB = 4.24 MB
Load Address: 40008000
Entry Point:  40008000
Image arch/arm/boot/uImage is ready
</code></pre>

<p>Compile the kernel modules:</p>

<pre><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j4 uImage
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j4 INSTALL_MOD_PATH=out modules
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j4 INSTALL_MOD_PATH=out modules_install
</code></pre>

<p>After the compilations are finished the uImage file is located in:</p>

<pre><code>linux-sunxi/arch/arm/boot/
</code></pre>

<p>The kernel modules are located in:</p>

<pre><code>linux-sunxi/out/lib/modules/3.x.xx
</code></pre>

<p>where 3.x.xx is kernel version</p>

<p>in our case the directory with modules is:</p>

<pre><code>linux-sunxi/out/lib/modules/3.4.90+
</code></pre>

<h3 id="toc_4">Format and setup the SD-card</h3>

<p>First we have to partition the SD card with fdisk. Plug SD card into your SD
card reader. Use a command like <code>dmesg</code> to get the correct device. If you select
the wrong device you might overwrite your own hard drive, so make sure you have
the correct one.</p>

<p>Start fdisk on the correct device:</p>

<pre><code>fdisk /dev/sdX
</code></pre>

<p>List the partitions:</p>

<pre><code>p
</code></pre>

<p>If there are already partitions on the card you should delete them. This will
erase the data on the SD card:</p>

<pre><code>d 
1
</code></pre>

<p>If you have more than one partitition press d again and provide the number, like
2, 3 etc.</p>

<p>Create the first partition, starting from 2048</p>

<pre><code>n
p
1
# enter twice
+16M
</code></pre>

<p>Create the second partition</p>

<pre><code>n
p
2 
# enter three times
</code></pre>

<p>List the created partitions:</p>

<pre><code>p 
</code></pre>

<p>if you did everything correctly on 4GB card you should see something like:</p>

<pre><code>Disk /dev/sdX: 3980 MB, 3980394496 bytes
123 heads, 62 sectors/track, 1019 cylinders, total 7774208 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

   Device Boot      Start         End      Blocks   Id  System
/dev/sdX1            2048       34815       16384   83  Linux
/dev/sdX2           34816     7774207     3869696   83  Linux
</code></pre>

<p>Write it to the SD card:</p>

<pre><code>w
</code></pre>

<p>Create the file system on the first partition. This should be vfat as this is
filesystem which the Allwinner bootloader understands:</p>

<pre><code>mkfs.vfat /dev/sdX1
</code></pre>

<p>The second should be a Linux ext4 partition:</p>

<pre><code>mkfs.ext4 /dev/sdX2
</code></pre>

<h3 id="toc_5">Writing the bootloader and related files</h3>

<p>You should be in the ~/A10 <em>kernel</em> 3.4/ folder.</p>

<p>The image <code>u-boot-sunxi-with-spl.bin</code> should be written to the device <code>/dev/sdX</code>
(not a partition like <code>sdX1</code> or <code>sdX2</code>).</p>

<p>Use <code>dd</code> to write the image we built earlier to the sd card:</p>

<pre><code>dd if=u-boot-sunxi/u-boot-sunxi-with-spl.bin of=/dev/sdX bs=1024 seek=8
</code></pre>

<p>Mount the first partition:</p>

<pre><code># mkdir /mnt/sd
mount /dev/sdX1 /mnt/sd
</code></pre>

<p>Copy the kernel uImage to root directory of partition 1:</p>

<pre><code>cp linux-sunxi/arch/arm/boot/uImage /mnt/sd
</code></pre>

<p>script.bin is a file with configuration parameters like port GPIO assignments,
DDR memory parameters, video resolution etc,</p>

<p>Download the file and place it on the SD card:</p>

<pre><code>wget -O /mnt/sd/script.bin https://raymii.org/s/inc/downloads/olinux/a10/script.bin
</code></pre>

<p>boot.scr has the uboot commands to load script.bin, kernel, initrd, set kernel
parameters and booting the device.</p>

<p>If you want to change it you can read this guide:</p>

<p>Download boot.scr and place it on the SD card:</p>

<pre><code>wget -O /mnt/sd/boot.scr https://raymii.org/s/inc/downloads/olinux/a10/boot.scr
</code></pre>

<p>Unmount the partition:</p>

<pre><code>sync
umount /dev/sdX1
</code></pre>

<h3 id="toc_6">Debian rootfs</h3>

<p>You can download my own image from here: <a href="https://raymii.org/s/articles/Olimex_A10-OLinuXino-LIME_minimal_debian_7_image.html">https://raymii.org/s/articles/Olimex
<em>A10-OLinuXino-LIME</em> minimal <em>debian</em> 7_image.html</a>. It is smaller than the
Olimex image, but has no GUI etc. The standard olimex Debian image is quite
large and has weird software choices.</p>

<p>The image provided by Olimex is mirrored here. Download it:</p>

<pre><code>wget https://2162bb74000a471eb2839a7f1648771a.objectstore.eu/olimex/a10_lime_debian_3_4_90_rel_3.tgz
</code></pre>

<p>Mount the second partition on the SD card:</p>

<pre><code>mount /dev/sdX2 /mnt/sd
</code></pre>

<p>Unpack the rootfs to the SD card:</p>

<pre><code>tar xzvf a10_lime_debian_3_4_90_rel_3.tgz -C /mnt/sd
</code></pre>

<p>The unpacked filesystem looks like below:</p>

<pre><code># ls /mnt/sd
bin   dev  home  lost+found  mnt  proc  run   selinux  sys  usr
boot  etc  lib   media       opt  root  sbin  srv      tmp  var
</code></pre>

<p>You have to replace the new generated kernel modules from <code>~/A10_kernel_3.4
/linux-sunxi/out/lib/modules/</code> to the debian file system we&#39;ve just unpacked:</p>

<pre><code>rm -rf /mnt/sd/lib/modules/*
cp -rfv linux-sunxi/out/lib/modules/3.x.xx+/ /mnt/sd/lib/modules/
</code></pre>

<p>where x.xx is the kernel version, in our case:</p>

<pre><code>cp -rfv linux-sunxi/out/lib/modules/3.4.90+/ /mnt/sd/lib/modules/
</code></pre>

<p>Replace /lib/firmware folder with the generated /linux-sunxi/out/firmware</p>

<pre><code>rm -rf /mnt/sd/lib/firmware/
cp -rfv linux-sunxi/out/lib/firmware/ /mnt/sd/lib/
</code></pre>

<p>Unmount the SD card:</p>

<pre><code>sync
umount /mnt/sdX2
</code></pre>

<p>Connect USB-SERIAL-CABLE-F to UEXT Tx.Rx and GND, or connect a HDMI screen. Put
the SD-card in A10-OLinuXino-Lime and apply 5V power, you should see Uboot and
then Kernel messages on the console.</p>

<p>The default username/password is : root / olimex</p>
Tags: <a href="../tags/allwinner.html">allwinner</a>
, <a href="../tags/arm.html">arm</a>
, <a href="../tags/articles.html">articles</a>
, <a href="../tags/debian.html">debian</a>
, <a href="../tags/gpio.html">gpio</a>
, <a href="../tags/minimal.html">minimal</a>
, <a href="../tags/olimex.html">olimex</a>
, <a href="../tags/olinuxino.html">olinuxino</a>
, <a href="../tags/raspberry-pi.html">raspberry-pi</a>
</div>
<br/>
<footer>
<br/>
                <form role="search" action="https://encrypted.google.com/search"
                style="min-width:250px;max-width:300px;">
                    <div class="form-group">
                      <input type="hidden" name="as_sitesearch" value="raymii.org">
                      <input type="hidden" name="as_qdr" value="all">
                      <input type="text" name="as_q" class="form-control" placeholder="Search">
                    </div>
                  </form>
                <br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small>
                </p>
    
    </footer>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3704876-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-3704876-6');
    </script>
    <script data-goatcounter="https://raymii.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
     
    </main>
    </body>
    </html>
    