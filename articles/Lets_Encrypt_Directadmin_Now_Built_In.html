
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Let's Encrypt with DirectAdmin, now built in! - Raymii.org</title>
        <style> *, ::before, ::after {background-repeat: no-repeat;-webkit-box-sizing: border-box;box-sizing: border-box;}::before, ::after {text-decoration: inherit;vertical-align: inherit;}html {cursor: default;font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.15;-moz-tab-size: 4;-o-tab-size: 4;tab-size: 4;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;word-break: break-word;}body {background-color: white;margin: 0;}h1 {font-size: 2em;margin: 0.67em 0;}hr {height: 0;overflow: visible;}main {display: block;}nav ol, nav ul {list-style: none;}pre {font-family: Roboto Mono, Menlo, Consolas, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}a {background-color: transparent;}abbr[title] {text-decoration: underline;-webkit-text-decoration: underline dotted;text-decoration: underline dotted;}b, strong {font-weight: bolder;}code, kbd, samp {font-family: Menlo, Consolas, Roboto Mono, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}small {font-size: 80%;}::-moz-selection {background-color: #b3d4fc;color: #000;text-shadow: none;}::selection {background-color: #b3d4fc;color: #000;text-shadow: none;}audio, canvas, iframe, img, svg, video {vertical-align: middle;}audio, video {display: inline-block;}audio:not([controls]) {display: none;height: 0;}img {border-style: none;}svg:not([fill]) {fill: currentColor;}svg:not(:root) {overflow: hidden;}table {border-collapse: collapse;}button, input, select, textarea {font-family: inherit;font-size: inherit;line-height: inherit;}button, input, select {margin: 0;}button {overflow: visible;text-transform: none;}button, [type="button"], [type="reset"], [type="submit"] {-webkit-appearance: button;}fieldset {padding: 0.35em 0.75em 0.625em;}input {overflow: visible;}legend {color: inherit;display: table;max-width: 100%;white-space: normal;}progress {display: inline-block;vertical-align: baseline;}select {text-transform: none;}textarea {margin: 0;overflow: auto;resize: vertical;}[type="checkbox"], [type="radio"] {padding: 0;}[type="search"] {-webkit-appearance: textfield;outline-offset: -2px;}::-webkit-inner-spin-button, ::-webkit-outer-spin-button {height: auto;}::-webkit-input-placeholder {color: inherit;opacity: 0.54;}::-webkit-search-decoration {-webkit-appearance: none;}::-webkit-file-upload-button {-webkit-appearance: button;font: inherit;}::-moz-focus-inner {border-style: none;padding: 0;}:-moz-focusring {outline: 1px dotted ButtonText;}details {display: block;}dialog {background-color: white;border: solid;color: black;display: block;height: -moz-fit-content;height: -webkit-fit-content;height: fit-content;left: 0;margin: auto;padding: 1em;position: absolute;right: 0;width: -moz-fit-content;width: -webkit-fit-content;width: fit-content;}dialog:not([open]) {display: none;}summary {display: list-item;}canvas {display: inline-block;}template {display: none;}a, area, button, input, label, select, summary, textarea, [tabindex] {-ms-touch-action: manipulation;touch-action: manipulation;}[hidden] {display: none;}[aria-busy="true"] {cursor: progress;}[aria-controls] {cursor: pointer;}[aria-disabled="true"], [disabled] {cursor: not-allowed;}[aria-hidden="false"][hidden]:not(:focus) {clip: rect(0, 0, 0, 0);display: inherit;position: absolute;}main, header, footer, article, section, aside, details, summary {margin: 0 auto;margin-bottom: 16px;width: 100%;}main {display: block;margin: 0 auto;max-width: 1000px;padding: 0 16px 16px;}footer {border-top: 1px solid rgba(0, 0, 0, 0.12);padding: 16px 0;text-align: left;}footer p {margin-bottom: 0;}hr {border: 0;border-top: 1px solid rgba(0, 0, 0, 0.12);display: block;margin-top: 16px;margin-bottom: 16px;width: 100%;-webkit-box-sizing: content-box;box-sizing: content-box;height: 0;overflow: visible;}img {height: auto;max-width: 100%;vertical-align: baseline;}@media screen and (max-width: 400px) {article, section, aside {clear: both;display: block;max-width: 100%;}img {margin-right: 16px;}}embed, iframe, video {border: 0;}body {color: rgba(0, 0, 0, 0.8);font-family: "Ubuntu", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size: 16px;line-height: 1.5;}p {margin: 0;margin-bottom: 16px;}h1, h2, h3, h4, h5, h6 {color: inherit;font-family: inherit;line-height: 1.2;font-weight: 500;}h1 {font-size: 40px;margin: 20px 0 16px;}h2 {font-size: 32px;margin: 20px 0 16px;}h3 {color: #75cc00;font-size: 28px;margin: 16px 0 4px;}h4 {color: #75cc00;font-size: 24px;margin: 16px 0 4px;}h5 {color: #75cc00;font-size: 20px;margin: 16px 0 4px;}h6 {color: #75cc00;font-size: 16px;margin: 16px 0 4px;}small {color: rgba(0, 0, 0, 0.54);vertical-align: bottom;}pre {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);display: block;font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;margin: 16px 0;padding: 16px;white-space: pre-wrap;overflow-wrap: break-word;}code {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;line-height: inherit;margin: 0;vertical-align: baseline;word-break: break-all;word-wrap: break-word;}a {color: #75cc00;text-decoration: none;background-color: transparent;}a:hover, a:focus {color: #0062cc;font-weight: bolder;text-decoration: underline;}dl {margin-bottom: 16px;}dd {margin-left: 40px;}ul, ol {margin-bottom: 8px;padding-left: 40px;vertical-align: baseline;}blockquote {border-left: 2px solid rgba(0, 0, 0, 0.8);font-family: Georgia, Times, "Times New Roman", serif;font-style: italic;margin: 16px 0;padding-left: 16px;}figcaption {font-family: Georgia, Times, "Times New Roman", serif;}u {text-decoration: underline;}s {text-decoration: line-through;}sup {font-size: 14px;vertical-align: super;}sub {font-size: 14px;vertical-align: sub;}mark {background: #ffeb3b;}input[type="text"], input[type="password"], input[type="email"], input[type="url"], input[type="date"], input[type="month"], input[type="time"], input[type="datetime"], input[type="datetime-local"], input[type="week"], input[type="number"], input[type="search"], input[type="tel"], select, textarea {background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}input[type="color"] {background: #fff;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;display: inline-block;vertical-align: middle;}input:not([type]) {-webkit-appearance: none;background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;text-align: left;}input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="url"]:focus, input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus, input[type="week"]:focus, input[type="number"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus, select:focus, textarea:focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input:not([type]):focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus {outline: 1px thin rgba(0, 0, 0, 0.12);}input[type="text"][disabled], input[type="password"][disabled], input[type="email"][disabled], input[type="url"][disabled], input[type="date"][disabled], input[type="month"][disabled], input[type="time"][disabled], input[type="datetime"][disabled], input[type="datetime-local"][disabled], input[type="week"][disabled], input[type="number"][disabled], input[type="search"][disabled], input[type="tel"][disabled], input[type="color"][disabled], select[disabled], textarea[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input:not([type])[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input[readonly], select[readonly], textarea[readonly] {border-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);}input:focus:invalid, textarea:focus:invalid, select:focus:invalid {border-color: #ea1c0d;color: #f44336;}input[type="file"]:focus:invalid:focus, input[type="radio"]:focus:invalid:focus, input[type="checkbox"]:focus:invalid:focus {outline-color: #f44336;}select {border: 1px solid rgba(0, 0, 0, 0.12);vertical-align: sub;}select:not([size]):not([multiple]) {height: -webkit-calc(2.25rem + 2px);height: calc(2.25rem + 2px);}select[multiple] {height: auto;}label {display: inline-block;line-height: 2;}fieldset {border: 0;margin: 0;padding: 8px 0;}legend {border-bottom: 1px solid rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.8);display: block;margin-bottom: 8px;padding: 8px 0;width: 100%;}textarea {overflow: auto;resize: vertical;}input[type=checkbox], input[type=radio] {-webkit-box-sizing: border-box;box-sizing: border-box;padding: 0;display: inline;}input[type=submit], input[type=reset], input[type=button], button {background-color: #75cc00;border: #75cc00;border-radius: 4px;color: #fff;padding: 8px 16px;display: inline-block;font-weight: 400;text-align: center;white-space: nowrap;vertical-align: middle;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;border: 1px solid transparent;font-size: 1rem;line-height: 1.5;-webkit-transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;}input[type=submit]::-moz-focus-inner, input[type=reset]::-moz-focus-inner, input[type=button]::-moz-focus-inner, button::-moz-focus-inner {padding: 0;}input[type=submit]:hover, input[type=reset]:hover, input[type=button]:hover, button:hover {background-color: #0069d9;border-color: #0062cc;color: #fff;}input[type=submit]:not(:disabled):active, input[type=reset]:not(:disabled):active, input[type=button]:not(:disabled):active, button:not(:disabled):active {background-color: #0062cc;border-color: #005cbf;color: #fff;}input[type=submit]:focus, input[type=reset]:focus, input[type=button]:focus, button:focus {outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);}input[type=submit]:disabled, input[type=reset]:disabled, input[type=button]:disabled, button:disabled {opacity: .65;cursor: not-allowed;background-color: #75cc00;border-color: #75cc00;color: #fff;}table {border-top: 1px solid rgba(0, 0, 0, 0.12);margin-bottom: 16px;}caption {padding: 8px 0;}thead th {border: 0;border-bottom: 2px solid rgba(0, 0, 0, 0.12);text-align: left;}tr {margin-bottom: 8px;}th, td {border-bottom: 1px solid rgba(0, 0, 0, 0.12);padding: 16px;white-space: nowrap;vertical-align: inherit;}tfoot tr {text-align: left;}tfoot td {color: rgba(0, 0, 0, 0.54);font-size: 8px;font-style: italic;padding: 16px 4px;}a.skip-main {left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999;}a.skip-main:focus, a.skip-main:active {color: #fff;background-color:#000;left: auto;top: auto;width: 30%;height: auto;overflow:auto;margin: 10px 35%;padding:5px;border-radius: 15px;border:4px solid yellow;text-align:center;font-size:1.2em;z-index:999;}@font-face {font-family: 'Raleway';font-style: normal;font-weight: 600;src: url('/s/inc/css/raleway-v18-latin-600.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-600.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-600.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-600.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-600.svg#Raleway') format('svg');}@font-face {font-family: 'Raleway';font-style: italic;font-weight: 400;src: url('/s/inc/css/raleway-v18-latin-italic.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-italic.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-italic.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-italic.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-italic.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-italic.svg#Raleway') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 400;src: url('/s/inc/css/roboto-mono-v12-latin-regular.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-regular.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-regular.svg#RobotoMono') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 600;src: url('/s/inc/css/roboto-mono-v12-latin-600.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-600.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-600.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-600.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-600.svg#RobotoMono') format('svg');}@font-face {font-family: 'Ubuntu';font-style: normal;font-weight: 400;src: url('/s/inc/css/ubuntu-v15-latin-regular.eot');src: local(''), url('/s/inc/css/ubuntu-v15-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/ubuntu-v15-latin-regular.woff2') format('woff2'), url('/s/inc/css/ubuntu-v15-latin-regular.woff') format('woff'), url('/s/inc/css/ubuntu-v15-latin-regular.ttf') format('truetype'), url('/s/inc/css/ubuntu-v15-latin-regular.svg#Ubuntu') format('svg');}@font-face {font-family:'Raleway2';font-style:normal;font-weight:normal;src:url('/s/inc/css/raleway.eot');src:local('Raleway2'),local('Raleway2'),url('/s/inc/css/raleway.ttf') }.headheader {font-family:"Raleway2"!important }.headheader a {color:#000;text-decoration:none }.headheader a:hover {color:#000;text-decoration:none!important }#toc ul {list-style: none;margin: 0;padding: 0;}#toc h3 {color:black;}</style>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />         
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAKCAYAAAD2Fg1xAAABgElEQVQ4jb3VP0iVYRTH8c9waXBokog7OYhTXChuF3GIi4hoiJA4REQIOTgGtoWTg6ODs0SYComIXCJEMhpKtD9guUU0ujRFS0PQ8DzC24v3Pq+3S9/pnMOP8/7Ocx6el/OziRN0JXTD+I2xhK4WdeNteGmbu8IgC3jQQlfCZ0zgINHzJabwoQP+ClHGV1zGJXwRDJ/FDJZi3MBQE10dL2K8gZFOGE3REDZyyjLunKG7KAzZHfMaXjXp+QbXYlzBfrvmSuhBNaHrxQU8zdQW8RhrOe0snuB7zA/jd6p4n9HV8QMfY/4JPzGAt7meFfS18LdXEk7uemIQuJ/Lj6PZQezFWhm3cTWnXcAj3MrU5oWh5WpzGM3UurGNZy28HSa8J7mB3Uy+4u/rl+UdrsT4Jraa6F6jP5M3MP0PHguzL9zzqmC2GRNYjXF2qDzDwgbgHp53wGMhJrEunGQ9oT3CQ+GFasWBsLVvwiv5XygJz/JOAe208POrJHST+CVspBB/AFY9Q3+QJqLxAAAAAElFTkSuQmCC" alt="Raymii.org Logo">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> 
                </small><br/><p>
                <link href="/s/_pagefind/pagefind-ui.css" rel="stylesheet">
                <script src="/s/_pagefind/pagefind-ui.js" type="text/javascript"></script>
                <div id="search" style="min-width:400px;max-width:1080px;"></div>
                <script>
                    window.addEventListener('DOMContentLoaded', (event) => {
                        new PagefindUI({ element: "#search" });
                    });
                </script>
                </p>
            </header>
          
    <main data-pagefind-body><h2 class='headheader' data-pagefind-meta='title' id='main'>Let's Encrypt with DirectAdmin, now built in!</h2>
<p><small>Published: <span data-pagefind-meta='date'>24-02-2016</span> | Author: Remy van Elst | <a href="Lets_Encrypt_Directadmin_Now_Built_In.txt">Text only version of this article</a>
</small></p>
<br><div class='olderthanayear'><p><strong>&#10071; This post is over eight years old. It may no longer be up to date. Opinions may have changed.</strong></p></div>
<div id="toc">
<h3>Table of Contents</h3>
<ul>
<li>
<a href="#toc_0">Update Directadmin</a>
</li>
<li>
<a href="#toc_1">Enable Let&#39;s Encrypt</a>
</li>
<li>
<a href="#toc_2">Request a certificate</a>
</li>
<li>
<a href="#toc_3">Profit!?!?!?!</a>
</li>
</ul>

</div><hr><div id="contents">
<p>Let&#39;s Encrypt is a new certificate authority, recognized by all major browsers.
They make it a breeze to set up TLS certificates for your web server. And for
free! Let&#39;s Encrypt is supported by major players like Mozilla, Akamai, Cisco,
the EFF, the Internet Security Research Group and others. Let&#39;s Encrypt provides
free, automatic and secure certificates so that every website can be secured
with an SSL certificate.</p>

<p>I have written <a href="https://raymii.org/s/articles/Lets_Encrypt_Directadmin.html">a guide</a> on using Lets Encrypt with Directadmin before, but
that involved manually logging in via SSH and a lot of work.</p>

<p>DirectAdmin now supports Lets Encrypt natively since <a href="http://www.directadmin.com/features.php?id=1828">version 1.50</a>, so no
more ssh fiddling, just via the control panel, for all the users on the server.</p>

<p class="ad"> <b>Recently I removed all Google Ads from this site due to their invasive tracking, as well as Google Analytics. Please, if you found this content useful, consider a small donation using any of the options below. It means the world to me if you  show your appreciation and you'll help pay the server costs:</b><br><br> <a href="https://github.com/sponsors/RaymiiOrg/">GitHub Sponsorship</a><br><br> <a href="https://pcbway.com/g/e7yQRg">PCBWay referral link (You get $5, I get $20 after you've placed an order)</a><br><br> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">Digital Ocea referral link  ($200 credit for 60 days. Spend $25 after your credit expires and I'll get $25!)</a><br><br> </p>

<p>The previous article still applies and it still works. It&#39;s generic enough for
all control panels and non-supported webservers by Let&#39;s Encrypt.</p>

<p>So let&#39;s get started. We&#39;ll do a couple of things, namely:</p>

<ol>
<li>Update Directadmin</li>
<li>Enable Let&#39;s Encrypt</li>
<li>Request a certificate</li>
<li>???</li>
<li>Profit!?!??!</li>
</ol>

<p>After step 3, everything is automatic, including renewals.</p>

<p>Do note that the last step of the article requires you to have set up a website
and a domain already. They must be working and resolving in DNS, because Let&#39;s
Encrypt triggers a challenge-response authentication to the domain name.</p>

<p>You can test with a subdomain as well, but make sure to add the subdomain as a
new domain, not as a subdomain (So, Domain Administration, Add a domain,
testsub.example.org). Actual subdomains don&#39;t support seperate SSL in
Directadmin.</p>

<p>Do note that I&#39;m not sponsored by Directadmin (Hi John and crew) nor by Let&#39;s
Encrypt. I just like them a lot both, Directadmin for being a lightweight but
very easy and functional controlpanel, and Let&#39;s Encrypt for their effort to
secure the entire web for free.</p>

<h3 id="toc_0">Update Directadmin</h3>

<p><img src="https://raymii.org/s/inc/img/da-le1.png" alt="da-le1"></p>

<p>Remember when I said no more fiddling with SSH? Well, that part isn&#39;t entirely
untrue. You need to login once via SSH to update Directadmin and enable Let&#39;s
Encrypt.</p>

<p>You can update Directadmin via the Administrator Settings -&gt; Update / Licensing
page as well, but I like the custombuild method better. Why? Because you can
update the other parts of your server as well and that a general good thing to
do.</p>

<p>Also, you do need to login via SSH and execute a few other steps like enabling
Let&#39;s Encrypt and rewriting the configuration files, so you might just as well
login and update via Custombuild.</p>

<p>A friend of mine wrote a <a href="http://www.arm-blog.com/keeping-directadmin-server-date/">great article on keeping Directadmin up to date</a> on
her website. I&#39;ll give you the TL;DR version here, but, if you want to know
more, read her article.</p>

<p>First log in to your server via SSH as root or as a user that can <code>sudo</code> to
root. Navigate to the <code>custombuild</code> folder:</p>

<pre><code>cd /usr/local/directadmin/custombuild/ 
</code></pre>

<p>Clean up earlier updates to make sure no weird quirks show up:</p>

<pre><code> ./build clean all
</code></pre>

<p>Update the software list:</p>

<pre><code>./build update
</code></pre>

<p>If you want, you can get a list of the updates available:</p>

<pre><code>./build versions | grep is
</code></pre>

<p>Output is like this:</p>

<pre><code>DirectAdmin 1.49.1 to 1.50.0 update is available.
cURL 7.46.0 to 7.47.1 update is available.
FreeType 2.6.2 to 2.6.3 update is available.
MySQL 5.6.28 to 5.6.29 update is available.
PHP 5.6 (mod_php) 5.6.17 to 5.6.18 update is available.
</code></pre>

<p>Apply the updates:</p>

<pre><code>./build update_versions
</code></pre>

<p>If you only want to update Directadmin and not the other updates you can do that
with the following command:</p>

<pre><code>./build update_da
</code></pre>

<p>While you&#39;re applying updates, do the operating system updates as well:</p>

<pre><code>apt-get update &amp;&amp; apt-get upgrade || yum update
</code></pre>

<p>The above command will work on both Debian / Ubuntu and CentOS. You will be
asked to confirm the updates before they&#39;re installed.</p>

<p>There is one more important thing to do and that is rewriting the configuration.
You need to do this because Directadmin keeps all the challenge-response files
in one place, not for all domains seperate. Directadmin&#39;s Custombuild has a
function for this. Do note that if you did any manual changed (not via
Directadmin), they will be lost. Make sure you have a backp. Rewrite the confs,
still in the custombuild folder:</p>

<pre><code>./build rewrite_confs
</code></pre>

<p>Now that your server is up to date, continue on to enable Let&#39;s Encrypt in
Directadmin.</p>

<h3 id="toc_1">Enable Let&#39;s Encrypt</h3>

<p>Make sure you&#39;re still logged in via SSH. You can execute the below command and
it will add the configuration to the Directadmin configuration, but only if it&#39;s
not already there:</p>

<pre><code>grep -q &#39;letsencrypt=1&#39; /usr/local/directadmin/conf/directadmin.conf || echo &#39;letsencrypt=1&#39; &gt;&gt; /usr/local/directadmin/conf/directadmin.conf
</code></pre>

<p>You can also manually edit the file
<code>/usr/local/directadmin/conf/directadmin.conf</code> and add the following value:</p>

<pre><code>&#39;letsencrypt=1&#39;
</code></pre>

<p>If your server is recent enough, CentOS 6, Ubuntu 12.04 and you run Apache 2.2
or higher, you can also enable <code>SNI</code> support (<a href="https://en.wikipedia.org/wiki/Server_Name_Indication">Server name indication</a>). That
is an extension to the TLS protocol which, simply said, allows you to host
multiple SSL enabled sites on one IP address.</p>

<p>Almost the same command as above, but with another value:</p>

<pre><code>grep -q &#39;enable_ssl_sni=1&#39; /usr/local/directadmin/conf/directadmin.conf || echo &#39;enable_ssl_sni=1&#39; &gt;&gt; /usr/local/directadmin/conf/directadmin.conf
</code></pre>

<p>After changing the configuration, restart Directadmin:</p>

<pre><code>service directadmin restart
</code></pre>

<p>You can check via the web interface if you now have the most recent version:</p>

<p><img src="https://raymii.org/s/inc/img/da-le2.png" alt="da-le2"></p>

<h3 id="toc_2">Request a certificate</h3>

<p>Now that we&#39;re all set up we can request a certificate for a website. Do make
sure the user and the package have SSL enabled in their settings, otherwise add
that option to the account.</p>

<p><img src="https://raymii.org/s/inc/img/da-le3.png" alt="da-le3"></p>

<p>Log in as the user you want to request the certificate for (either with their
username and password or via the &quot;Admin&quot; -&gt; &quot;Show all users&quot;, &quot;username&quot;, &quot;Login
as username&quot;). Navigate to &quot;Advanced Features&quot; -&gt; &quot;SSL Certificates&quot;.</p>

<p><img src="https://raymii.org/s/inc/img/da-le4.png" alt="da-le4"></p>

<p>Make sure the top line says: <code>SSL is currently enabled for this domain. You can
disable it here.</code></p>

<p>If it says <code>SSL is currently disabled for this domain. You can enable it here.</code>,
click the <code>Enable it here</code> link and turn it on, then go back to the &quot;SSL
Certificates&quot; page.</p>

<p>Select the third option, <code>Free &amp; automatic certificate from Let&#39;s Encrypt</code> and
fill in the fields below.</p>

<p><img src="https://raymii.org/s/inc/img/da-le5.png" alt="da-le5"></p>

<p>If you&#39;ve set up everything correctly, that meaning updated Directadmin, rewrote
the configuration and enabled Let&#39;s Encrypt you should have output like in the
picture below, with a correctly and valid certificate.</p>

<p><img src="https://raymii.org/s/inc/img/da-le6.png" alt="da-le6"></p>

<p>You can check if it all worked by using my SSL Check over at
<a href="https://ssldecoder.org/">SSLdecoder.org</a>.</p>

<p>Directadmin will also show you that Let&#39;s Encrypt is enabled, plus the auto-
renew date.</p>

<p><img src="https://raymii.org/s/inc/img/da-le7.png" alt="da-le7"></p>

<p>If you forgot to rewrite the configuration, you might get an error message like
in the picture below. Go back and re-do everything in this tutorial, don&#39;t
forget to rewrite the configuration and try again.</p>

<p><img src="https://raymii.org/s/inc/img/da-le8.png" alt="da-le8"></p>

<p>That&#39;s all there is. Your website is now set up with a certificate for free,
which will auto renew when it&#39;s about to expire. You don&#39;t have to do anything
or worry about it anymore.</p>

<h3 id="toc_3">Profit!?!?!?!</h3>

<p>Another subtopic? But we&#39;re already done, the site has a certificate and it all
works? I know, I know. There are a few things you might want to do to make sure
it all keeps working in the best state.</p>

<p>First, to make sure the certificate doesn&#39;t expire, add your website to the free
<a href="https://certificatemonitor.org/">Certificate Expiry Monitor</a> service, one of my other projects. The renew
process should be automatic, but you never know. Even <a href="http://arstechnica.com/information-technology/2015/04/google-let-root-certificate-for-gmail-expire-causing-e-mail-hiccups/">Google</a> sometimes
forgets to renew certificates, so better to make sure it won&#39;t happen to your
sites.</p>

<p>Second, you can optimize all aspects of TLS and make sure it&#39;s very secure. I
<a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_Apache2.html">have a guide on that for Apache</a>, <a href="https://wiki.mozilla.org/Security/Server_Side_TLS">the Mozilla Foundation</a> has one as
well. Both are very good, explain all aspects and make sure your site is as
secure as possible.</p>

<p>Third, check your score, settings and ratings on an SSL/TLS tester like <a href="https://www.ssllabs.com/ssltest/">SSL
Labs</a> or my own, faster check, <a href="https://ssldecoder.org/">the SSL Decoder</a>, which is <a href="https://github.com/RaymiiOrg/ssl-decoder">open
source</a> as well.</p>

<p>Fourth and last, <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">If you like this article, consider sponsoring me by trying out
a Digital Ocean VPS. With this link you&#39;ll get a $5 VPS for 2 months free (as
in, you get $10 credit). (referral link)</a></p>
Tags: <a href="../tags/apache.html">apache</a>
, <a href="../tags/articles.html">articles</a>
, <a href="../tags/centos.html">centos</a>
, <a href="../tags/certificate.html">certificate</a>
, <a href="../tags/directadmin.html">directadmin</a>
, <a href="../tags/nginx.html">nginx</a>
, <a href="../tags/openssl.html">openssl</a>
, <a href="../tags/ssl.html">ssl</a>
, <a href="../tags/tls.html">tls</a>
</div></main>
<br/>
<footer>
<br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small>
                </p>
    
    </footer>
    <script data-goatcounter="https://raymii.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>

    <script defer src="/s/inc/js/instant.5.2.0.js"  type="module" ></script>

     
    </main>
    </body>
    </html>
    