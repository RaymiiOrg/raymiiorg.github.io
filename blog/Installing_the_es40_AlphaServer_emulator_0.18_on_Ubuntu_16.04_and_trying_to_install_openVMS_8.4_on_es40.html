
    <!DOCTYPE html>
    <html lang="en">
        <head>
        <title>Installing the es40 AlphaServer emulator 0.18 on Ubuntu 16.04, and trying to install OpenVMS 8.4 on es40 - Raymii.org</title>
        <style> *, ::before, ::after {background-repeat: no-repeat;-webkit-box-sizing: border-box;box-sizing: border-box;}::before, ::after {text-decoration: inherit;vertical-align: inherit;}html {cursor: default;font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.15;-moz-tab-size: 4;-o-tab-size: 4;tab-size: 4;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;word-break: break-word;}body {background-color: white;margin: 0;}h1 {font-size: 2em;margin: 0.67em 0;}hr {height: 0;overflow: visible;}main {display: block;}nav ol, nav ul {list-style: none;}pre {font-family: Roboto Mono, Menlo, Consolas, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}a {background-color: transparent;}abbr[title] {text-decoration: underline;-webkit-text-decoration: underline dotted;text-decoration: underline dotted;}b, strong {font-weight: bolder;}code, kbd, samp {font-family: Menlo, Consolas, Roboto Mono, Ubuntu Monospace, Noto Mono, Oxygen Mono, Liberation Mono, monospace;font-size: 1em;}small {font-size: 80%;}::-moz-selection {background-color: #b3d4fc;color: #000;text-shadow: none;}::selection {background-color: #b3d4fc;color: #000;text-shadow: none;}audio, canvas, iframe, img, svg, video {vertical-align: middle;}audio, video {display: inline-block;}audio:not([controls]) {display: none;height: 0;}img {border-style: none;}svg:not([fill]) {fill: currentColor;}svg:not(:root) {overflow: hidden;}table {border-collapse: collapse;}button, input, select, textarea {font-family: inherit;font-size: inherit;line-height: inherit;}button, input, select {margin: 0;}button {overflow: visible;text-transform: none;}button, [type="button"], [type="reset"], [type="submit"] {-webkit-appearance: button;}fieldset {padding: 0.35em 0.75em 0.625em;}input {overflow: visible;}legend {color: inherit;display: table;max-width: 100%;white-space: normal;}progress {display: inline-block;vertical-align: baseline;}select {text-transform: none;}textarea {margin: 0;overflow: auto;resize: vertical;}[type="checkbox"], [type="radio"] {padding: 0;}[type="search"] {-webkit-appearance: textfield;outline-offset: -2px;}::-webkit-inner-spin-button, ::-webkit-outer-spin-button {height: auto;}::-webkit-input-placeholder {color: inherit;opacity: 0.54;}::-webkit-search-decoration {-webkit-appearance: none;}::-webkit-file-upload-button {-webkit-appearance: button;font: inherit;}::-moz-focus-inner {border-style: none;padding: 0;}:-moz-focusring {outline: 1px dotted ButtonText;}details {display: block;}dialog {background-color: white;border: solid;color: black;display: block;height: -moz-fit-content;height: -webkit-fit-content;height: fit-content;left: 0;margin: auto;padding: 1em;position: absolute;right: 0;width: -moz-fit-content;width: -webkit-fit-content;width: fit-content;}dialog:not([open]) {display: none;}summary {display: list-item;}canvas {display: inline-block;}template {display: none;}a, area, button, input, label, select, summary, textarea, [tabindex] {-ms-touch-action: manipulation;touch-action: manipulation;}[hidden] {display: none;}[aria-busy="true"] {cursor: progress;}[aria-controls] {cursor: pointer;}[aria-disabled="true"], [disabled] {cursor: not-allowed;}[aria-hidden="false"][hidden]:not(:focus) {clip: rect(0, 0, 0, 0);display: inherit;position: absolute;}main, header, footer, article, section, aside, details, summary {margin: 0 auto;margin-bottom: 16px;width: 100%;}main {display: block;margin: 0 auto;max-width: 1000px;padding: 0 16px 16px;}footer {border-top: 1px solid rgba(0, 0, 0, 0.12);padding: 16px 0;text-align: left;}footer p {margin-bottom: 0;}hr {border: 0;border-top: 1px solid rgba(0, 0, 0, 0.12);display: block;margin-top: 16px;margin-bottom: 16px;width: 100%;-webkit-box-sizing: content-box;box-sizing: content-box;height: 0;overflow: visible;}img {height: auto;max-width: 100%;vertical-align: baseline;}@media screen and (max-width: 400px) {article, section, aside {clear: both;display: block;max-width: 100%;}img {margin-right: 16px;}}embed, iframe, video {border: 0;}body {color: rgba(0, 0, 0, 0.8);font-family: "Ubuntu", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size: 16px;line-height: 1.5;}p {margin: 0;margin-bottom: 16px;}h1, h2, h3, h4, h5, h6 {color: inherit;font-family: inherit;line-height: 1.2;font-weight: 500;}h1 {font-size: 40px;margin: 20px 0 16px;}h2 {font-size: 32px;margin: 20px 0 16px;}h3 {color: #75cc00;font-size: 28px;margin: 16px 0 4px;}h4 {color: #75cc00;font-size: 24px;margin: 16px 0 4px;}h5 {color: #75cc00;font-size: 20px;margin: 16px 0 4px;}h6 {color: #75cc00;font-size: 16px;margin: 16px 0 4px;}small {color: rgba(0, 0, 0, 0.54);vertical-align: bottom;}pre {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);display: block;font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;margin: 16px 0;padding: 16px;white-space: pre-wrap;overflow-wrap: break-word;}code {background: #f7f7f9;color: rgba(0, 0, 0, 0.8);font-family: "Roboto Mono", Menlo, Monaco, Consolas, "Courier New", monospace;font-size: 16px;line-height: inherit;margin: 0;vertical-align: baseline;word-break: break-all;word-wrap: break-word;}a {color: #75cc00;text-decoration: none;background-color: transparent;}a:hover, a:focus {color: #0062cc;font-weight: bolder;text-decoration: underline;}dl {margin-bottom: 16px;}dd {margin-left: 40px;}ul, ol {margin-bottom: 8px;padding-left: 40px;vertical-align: baseline;}blockquote {border-left: 2px solid rgba(0, 0, 0, 0.8);font-family: Georgia, Times, "Times New Roman", serif;font-style: italic;margin: 16px 0;padding-left: 16px;}figcaption {font-family: Georgia, Times, "Times New Roman", serif;}u {text-decoration: underline;}s {text-decoration: line-through;}sup {font-size: 14px;vertical-align: super;}sub {font-size: 14px;vertical-align: sub;}mark {background: #ffeb3b;}input[type="text"], input[type="password"], input[type="email"], input[type="url"], input[type="date"], input[type="month"], input[type="time"], input[type="datetime"], input[type="datetime-local"], input[type="week"], input[type="number"], input[type="search"], input[type="tel"], select, textarea {background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}input[type="color"] {background: #fff;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;display: inline-block;vertical-align: middle;}input:not([type]) {-webkit-appearance: none;background: #fff;background-clip: padding-box;border: 1px solid rgba(0, 0, 0, 0.12);border-radius: 4px;color: rgba(0, 0, 0, 0.8);display: block;width: 100%;padding: 8px 16px;line-height: 1.5;-webkit-transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;text-align: left;}input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="url"]:focus, input[type="date"]:focus, input[type="month"]:focus, input[type="time"]:focus, input[type="datetime"]:focus, input[type="datetime-local"]:focus, input[type="week"]:focus, input[type="number"]:focus, input[type="search"]:focus, input[type="tel"]:focus, input[type="color"]:focus, select:focus, textarea:focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input:not([type]):focus {background-color: #fff;border-color: #80bdff;outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);}input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus {outline: 1px thin rgba(0, 0, 0, 0.12);}input[type="text"][disabled], input[type="password"][disabled], input[type="email"][disabled], input[type="url"][disabled], input[type="date"][disabled], input[type="month"][disabled], input[type="time"][disabled], input[type="datetime"][disabled], input[type="datetime-local"][disabled], input[type="week"][disabled], input[type="number"][disabled], input[type="search"][disabled], input[type="tel"][disabled], input[type="color"][disabled], select[disabled], textarea[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input:not([type])[disabled] {background-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);cursor: not-allowed;opacity: 1;}input[readonly], select[readonly], textarea[readonly] {border-color: rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.54);}input:focus:invalid, textarea:focus:invalid, select:focus:invalid {border-color: #ea1c0d;color: #f44336;}input[type="file"]:focus:invalid:focus, input[type="radio"]:focus:invalid:focus, input[type="checkbox"]:focus:invalid:focus {outline-color: #f44336;}select {border: 1px solid rgba(0, 0, 0, 0.12);vertical-align: sub;}select:not([size]):not([multiple]) {height: -webkit-calc(2.25rem + 2px);height: calc(2.25rem + 2px);}select[multiple] {height: auto;}label {display: inline-block;line-height: 2;}fieldset {border: 0;margin: 0;padding: 8px 0;}legend {border-bottom: 1px solid rgba(0, 0, 0, 0.12);color: rgba(0, 0, 0, 0.8);display: block;margin-bottom: 8px;padding: 8px 0;width: 100%;}textarea {overflow: auto;resize: vertical;}input[type=checkbox], input[type=radio] {-webkit-box-sizing: border-box;box-sizing: border-box;padding: 0;display: inline;}input[type=submit], input[type=reset], input[type=button], button {background-color: #75cc00;border: #75cc00;border-radius: 4px;color: #fff;padding: 8px 16px;display: inline-block;font-weight: 400;text-align: center;white-space: nowrap;vertical-align: middle;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;border: 1px solid transparent;font-size: 1rem;line-height: 1.5;-webkit-transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out, -webkit-box-shadow .15s ease-in-out;}input[type=submit]::-moz-focus-inner, input[type=reset]::-moz-focus-inner, input[type=button]::-moz-focus-inner, button::-moz-focus-inner {padding: 0;}input[type=submit]:hover, input[type=reset]:hover, input[type=button]:hover, button:hover {background-color: #0069d9;border-color: #0062cc;color: #fff;}input[type=submit]:not(:disabled):active, input[type=reset]:not(:disabled):active, input[type=button]:not(:disabled):active, button:not(:disabled):active {background-color: #0062cc;border-color: #005cbf;color: #fff;}input[type=submit]:focus, input[type=reset]:focus, input[type=button]:focus, button:focus {outline: 0;-webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);}input[type=submit]:disabled, input[type=reset]:disabled, input[type=button]:disabled, button:disabled {opacity: .65;cursor: not-allowed;background-color: #75cc00;border-color: #75cc00;color: #fff;}table {border-top: 1px solid rgba(0, 0, 0, 0.12);margin-bottom: 16px;}caption {padding: 8px 0;}thead th {border: 0;border-bottom: 2px solid rgba(0, 0, 0, 0.12);text-align: left;}tr {margin-bottom: 8px;}th, td {border-bottom: 1px solid rgba(0, 0, 0, 0.12);padding: 16px;white-space: nowrap;vertical-align: inherit;}tfoot tr {text-align: left;}tfoot td {color: rgba(0, 0, 0, 0.54);font-size: 8px;font-style: italic;padding: 16px 4px;}a.skip-main {left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999;}a.skip-main:focus, a.skip-main:active {color: #fff;background-color:#000;left: auto;top: auto;width: 30%;height: auto;overflow:auto;margin: 10px 35%;padding:5px;border-radius: 15px;border:4px solid yellow;text-align:center;font-size:1.2em;z-index:999;}@font-face {font-family: 'Raleway';font-style: normal;font-weight: 600;src: url('/s/inc/css/raleway-v18-latin-600.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-600.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-600.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-600.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-600.svg#Raleway') format('svg');}@font-face {font-family: 'Raleway';font-style: italic;font-weight: 400;src: url('/s/inc/css/raleway-v18-latin-italic.eot');src: local(''), url('/s/inc/css/raleway-v18-latin-italic.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/raleway-v18-latin-italic.woff2') format('woff2'), url('/s/inc/css/raleway-v18-latin-italic.woff') format('woff'), url('/s/inc/css/raleway-v18-latin-italic.ttf') format('truetype'), url('/s/inc/css/raleway-v18-latin-italic.svg#Raleway') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 400;src: url('/s/inc/css/roboto-mono-v12-latin-regular.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-regular.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-regular.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-regular.svg#RobotoMono') format('svg');}@font-face {font-family: 'Roboto Mono';font-style: normal;font-weight: 600;src: url('/s/inc/css/roboto-mono-v12-latin-600.eot');src: local(''), url('/s/inc/css/roboto-mono-v12-latin-600.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/roboto-mono-v12-latin-600.woff2') format('woff2'), url('/s/inc/css/roboto-mono-v12-latin-600.woff') format('woff'), url('/s/inc/css/roboto-mono-v12-latin-600.ttf') format('truetype'), url('/s/inc/css/roboto-mono-v12-latin-600.svg#RobotoMono') format('svg');}@font-face {font-family: 'Ubuntu';font-style: normal;font-weight: 400;src: url('/s/inc/css/ubuntu-v15-latin-regular.eot');src: local(''), url('/s/inc/css/ubuntu-v15-latin-regular.eot?#iefix') format('embedded-opentype'), url('/s/inc/css/ubuntu-v15-latin-regular.woff2') format('woff2'), url('/s/inc/css/ubuntu-v15-latin-regular.woff') format('woff'), url('/s/inc/css/ubuntu-v15-latin-regular.ttf') format('truetype'), url('/s/inc/css/ubuntu-v15-latin-regular.svg#Ubuntu') format('svg');}@font-face {font-family:'Raleway2';font-style:normal;font-weight:normal;src:url('/s/inc/css/raleway.eot');src:local('Raleway2'),local('Raleway2'),url('/s/inc/css/raleway.ttf') }.headheader {font-family:"Raleway2"!important }.headheader a {color:#000;text-decoration:none }.headheader a:hover {color:#000;text-decoration:none!important }#toc ul {list-style: none;margin: 0;padding: 0;}#toc h3 {color:black;}</style>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="application/opensearchdescription+xml" rel="search" href="/s/inc/opensearch.xml"/>
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for Raymii.org" href="https://raymii.org/s/feed.xml" />         
    </head>
    <body>
        
        <a id="top-of-page"></a>
        <main>
        <a class="skip-main" href="#main">Skip to main content</a>
            <header>
                <h1 class="headheader">
                    <a href="https://raymii.org/s/">Raymii.org 
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAKCAYAAAD2Fg1xAAABgElEQVQ4jb3VP0iVYRTH8c9waXBokog7OYhTXChuF3GIi4hoiJA4REQIOTgGtoWTg6ODs0SYComIXCJEMhpKtD9guUU0ujRFS0PQ8DzC24v3Pq+3S9/pnMOP8/7Ocx6el/OziRN0JXTD+I2xhK4WdeNteGmbu8IgC3jQQlfCZ0zgINHzJabwoQP+ClHGV1zGJXwRDJ/FDJZi3MBQE10dL2K8gZFOGE3REDZyyjLunKG7KAzZHfMaXjXp+QbXYlzBfrvmSuhBNaHrxQU8zdQW8RhrOe0snuB7zA/jd6p4n9HV8QMfY/4JPzGAt7meFfS18LdXEk7uemIQuJ/Lj6PZQezFWhm3cTWnXcAj3MrU5oWh5WpzGM3UurGNZy28HSa8J7mB3Uy+4u/rl+UdrsT4Jraa6F6jP5M3MP0PHguzL9zzqmC2GRNYjXF2qDzDwgbgHp53wGMhJrEunGQ9oT3CQ+GFasWBsLVvwiv5XygJz/JOAe208POrJHST+CVspBB/AFY9Q3+QJqLxAAAAAElFTkSuQmCC" alt="Raymii.org Logo">
                    </a>
                </h1>
                <small>
                  Quis custodiet ipsos custodes?<br>
                  <a href="/s/">Home</a> | 
                  <a href="/s/static/About.html">About</a> | 
                  <a href="/s/tags/all.html">All pages</a> | 
                  <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                  <a href="https://raymii.org/s/feed.xml">RSS Feed</a> 
                </small><br/><p>
                <link href="/s/_pagefind/pagefind-ui.css" rel="stylesheet">
                <script src="/s/_pagefind/pagefind-ui.js" type="text/javascript"></script>
                <div id="search" style="min-width:400px;max-width:1080px;"></div>
                <script>
                    window.addEventListener('DOMContentLoaded', (event) => {
                        new PagefindUI({ element: "#search" });
                    });
                </script>
                </p>
            </header>
          
    <main data-pagefind-body><h2 class='headheader' data-pagefind-meta='title' id='main'>Installing the es40 AlphaServer emulator 0.18 on Ubuntu 16.04, and trying to install OpenVMS 8.4 on es40</h2>
<p><small>Published: <span data-pagefind-meta='date'>24-04-2018</span> | Author: Remy van Elst | <a href="Installing_the_es40_AlphaServer_emulator_0.18_on_Ubuntu_16.04_and_trying_to_install_openVMS_8.4_on_es40.txt">Text only version of this article</a>
</small></p>
<br><div class='olderthanayear'><p><strong>&#10071; This post is over five years old. It may no longer be up to date. Opinions may have changed.</strong></p></div>
<div id="toc">
<h3>Table of Contents</h3>
<ul>
<li>
<a href="#toc_0">AlphaServer and ES40</a>
</li>
<li>
<a href="#toc_1">Dependencies</a>
</li>
<li>
<a href="#toc_2">./configure</a>
</li>
<li>
<a href="#toc_3">SIGSEGV</a>
</li>
<li>
<a href="#toc_4">Configuration that boots without segfaults</a>
</li>
<li>
<a href="#toc_5">SRM (System Reference Manual) firmware</a>
</li>
<li>
<a href="#toc_6">Boot up es40, finally</a>
</li>
<li>
<a href="#toc_7">SYSFAULT CPU1 - pc = 001a0e84</a>
</li>
<li>
<a href="#toc_8">Installing OpenVMS 8.4</a>
</li>
</ul>

</div><hr><div id="contents">
<p><a href="https://raymii.org/s/tags/openvms.html"><img src="https://raymii.org/s/inc/img/ovmsdec.png" alt="openvms"></a></p>

<p>(You can read all my OpenVMS articles by <a href="https://raymii.org/s/tags/openvms.html">clicking the picture above</a>)</p>

<p>OpenVMS 7.3 is the latest version of OpenVMS for the VAX architecture. Since the
<a href="http://decus.org">DECUS</a> system uses OpenVMS 8.4 there were some version differences. I could
not set my &#39;BACKSPACE=DELETE&#39; (<a href="https://raymii.org/s/blog/Backspace_and_delete_key_behaviour_on_OpenVMS.html">see my article here</a>) on 7.3. The hobbyist
license also covers the Alpha and Itanium versions of OpenVMS so I want to try
the Alpha version, which is consequently also 8.4, the latest release. This
article describes my attempt to compile and install the es40 open source Alpha
emulator on Ubuntu 16.04 and subsequently the installation of OpenVMS Alpha. The
emulator is not under active development since 2008, and the installation of
OpenVMS fails. OpenVMS does boot however, very very slowly.</p>

<p class="ad"> <b>Recently I removed all Google Ads from this site due to their invasive tracking, as well as Google Analytics. Please, if you found this content useful, consider a small donation using any of the options below:</b><br><br> <a href="https://leafnode.nl">I'm developing an open source monitoring app called  Leaf Node Monitoring, for windows, linux & android. Go check it out!</a><br><br> <a href="https://github.com/sponsors/RaymiiOrg/">Consider sponsoring me on Github. It means the world to me if you show your appreciation and you'll help pay the server costs.</a><br><br> <a href="https://www.digitalocean.com/?refcode=7435ae6b8212">You can also sponsor me by getting a Digital Ocean VPS. With this referral link you'll get $100 credit for 60 days. </a><br><br> </p>

<h3 id="toc_0">AlphaServer and ES40</h3>

<p>Wikipedia defines the Alphaserver, of which ES40 is a type:</p>

<blockquote>
<p>AlphaServer was the name given to a series of server computers, produced from
1994 onwards by Digital Equipment Corporation, and later by Compaq and HP. As
the name suggests, the AlphaServers were based on the DEC Alpha 64-bit
microprocessor. As part of the roadmap to phase out Alpha-, MIPS- and PA-RISC-
based systems in favor of Itanium-based systems at HP, the most recent
AlphaServer systems reached their end of general availability on 27 April 2007.
The availability of upgrades and options was discontinued on 25 April 2008,
approximately one year after the systems were discontinued.</p>
</blockquote>

<p>The <a href="http://es40.org">es40</a> project is the only open source Alpha emulator for Linux but sadly
the development halted around 2009. The author, Camiel Vanderhoeven, is now
working for VMS Software inc, the company that now develops OpenVMS and the x86
port. He is also doing <a href="https://www.youtube.com/user/ibm360m65/videos">talks and video&#39;s</a> on OpenVMS:</p>

<p>The ES40 Emulator Project aims to create portable emulator for the HP (DEC,
Compaq) AlphaServer ES40.</p>

<p>There are other Alpha emulators, like FreeAXP, but those are Windows only.</p>

<p>Via <a href="http://dipc.ehu.es/cc/computing_resources/erebo.html">this page</a> I found a picture of the actual hardware ES40:</p>

<p><img src="https://raymii.org/s/inc/img/es-40.jpg" alt=""></p>

<p><a href="http://web.archive.org/web/20180424094256/http://vaxhaven.com/AlphaServer_ES40">Here</a> are more pictures and manuals of the ES40 hardware.</p>

<h3 id="toc_1">Dependencies</h3>

<p>To build the emulator on Ubuntu 16.04, a lot of development dependencies are
required. Install all of them using apt:</p>

<pre><code>apt-get install libpcap-dev build-essential unzip libx11-dev libsdl-dev automake autotools-dev libpoco-dev libxt-dev checkinstall
</code></pre>

<p>The actual source code is hosted on sourceforge and you can do a CVS checkout,
but that is slow and someone put the code on Github, so lets check out the
repository:</p>

<pre><code>git clone https://github.com/RaymiiOrg/es40
</code></pre>

<p>Output:</p>

<pre><code>Cloning into &#39;es40&#39;...
remote: Counting objects: 317, done.
remote: Total 317 (delta 0), reused 0 (delta 0), pack-reused 317
Receiving objects: 100% (317/317), 867.65 KiB | 733.00 KiB/s, done.
Resolving deltas: 100% (112/112), done.
Checking connectivity... done.
</code></pre>

<h3 id="toc_2">./configure</h3>

<p>This was one of the parts that gave me problems. First go into the code folder:</p>

<pre><code>cd es40
</code></pre>

<p>If all the dependencies are installed, the output should be like this:</p>

<pre><code>$ ./configure
</code></pre>

<p>Output:</p>

<pre><code>checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for g++... g++
[...]
checking for strncasecmp... yes
checking for _stricasecmp... no
checking for strspn... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating doc/Makefile
config.status: creating m4/Makefile
config.status: creating src/Makefile
config.status: creating src/config.h
config.status: executing depfiles commands
</code></pre>

<p>Start the compilation. This gave me an error right away:</p>

<pre><code>$ make
</code></pre>

<p>Output:</p>

<pre><code>CDPATH=&quot;${ZSH_VERSION+.}:&quot; &amp;&amp; cd . &amp;&amp; /bin/bash /home/username/tmp/es40/missing aclocal-1.14 -I m4
/home/username/tmp/es40/missing: line 81: aclocal-1.14: command not found
WARNING: &#39;aclocal-1.14&#39; is missing on your system.
         You should only need it if you modified &#39;acinclude.m4&#39; or
         &#39;configure.ac&#39; or m4 files included by &#39;configure.ac&#39;.
         The &#39;aclocal&#39; program is part of the GNU Automake package:
         &lt;http://www.gnu.org/software/automake&gt;
         It also requires GNU Autoconf, GNU m4 and Perl in order to run:
         &lt;http://www.gnu.org/software/autoconf&gt;
         &lt;http://www.gnu.org/software/m4/&gt;
         &lt;http://www.perl.org/&gt;
Makefile:383: recipe for target &#39;aclocal.m4&#39; failed
make: *** [aclocal.m4] Error 127
</code></pre>

<p>I had to make two symlinks to these specific versions to get make to continue:</p>

<pre><code>$ sudo ln -s /usr/bin/aclocal /usr/bin/aclocal-1.14
$ sudo ln -s /usr/bin/automake /usr/bin/automake-1.14
</code></pre>

<p>The next try also failed:</p>

<pre><code>$ make
</code></pre>

<p>Output:</p>

<pre><code>config.status: creating m4/Makefile
make[1]: Nothing to be done for &#39;all&#39;.
make[1]: Leaving directory &#39;/home/username/tmp/es40/m4&#39;
Making all in src
make[1]: Entering directory &#39;/home/username/tmp/es40/src&#39;
 cd .. &amp;&amp; /bin/bash ./config.status src/Makefile depfiles
config.status: creating src/Makefile
config.status: executing depfiles commands
make  all-am
make[2]: Entering directory &#39;/home/username/tmp/es40/src&#39;
depbase=`echo AliM1543C.o | sed &#39;s|[^/]*$|.deps/&amp;|;s|\.o$||&#39;`;\
g++ -DHAVE_CONFIG_H -I.     -g -O2 -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT -DHAVE_SDL -I/usr/include -DHAVE_PCAP nope -DHAVE_X11 -pthread -MT AliM1543C.o -MD -MP -MF $depbase.Tpo -c -o AliM
1543C.o AliM1543C.cpp &amp;&amp;\
mv -f $depbase.Tpo $depbase.Po
g++: error: nope: No such file or directory
Makefile:1065: recipe for target &#39;AliM1543C.o&#39; failed
make[2]: *** [AliM1543C.o] Error 1
make[2]: Leaving directory &#39;/home/username/tmp/es40/src&#39;
Makefile:557: recipe for target &#39;all&#39; failed
make[1]: *** [all] Error 2
make[1]: Leaving directory &#39;/home/username/tmp/es40/src&#39;
Makefile:404: recipe for target &#39;all-recursive&#39; failed
make: *** [all-recursive] Error 1
</code></pre>

<p>Where does this error come from: <code>g++: error: nope: No such file or directory</code>?
I don&#39;t know any Nope binary. Lets see if it&#39;s in the Makefile:</p>

<pre><code>$ grep nope Makefile
</code></pre>

<p>Output:</p>

<pre><code>X11_CFLAGS = nope
CXXFLAGS = -g -O2 -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT -DHAVE_SDL -I/usr/include -DHAVE_PCAP nope -DHAVE_X11 -pthread
</code></pre>

<p>Looking in the macro, the <code>nope</code> is there as well.
<a href="https://github.com/RaymiiOrg/es40/blob/master/m4/x11.m4#L52">https://github.com/RaymiiOrg/es40/blob/master/m4/x11.m4#L52</a></p>

<p>It looks for the following C header file:</p>

<pre><code>X11/Intrinsic.h
</code></pre>

<p>According to the <a href="https://packages.ubuntu.com/search?suite=lucid&amp;arch=any&amp;mode=exactfilename&amp;searchon=contents&amp;keywords=X11%2FIntrinsic.h">Ubuntu package site</a> that file is in the <code>libxt-dev</code>
package. I missed that when installing the dependencies. After installing it,
the make ran without breaking errors:</p>

<pre><code>make
</code></pre>

<p>Output:</p>

<pre><code>Making all in m4
make[1]: Entering directory &#39;/home/username/tmp/es40/m4&#39;
make[1]: Nothing to be done for &#39;all&#39;.
make[1]: Leaving directory &#39;/home/username/tmp/es40/m4&#39;
Making all in src
make[1]: Entering directory &#39;/home/username/tmp/es40/src&#39;
make  all-am
make[2]: Entering directory &#39;/home/username/tmp/es40/src&#39;
depbase=`echo AliM1543C.o | sed &#39;s|[^/]*$|.deps/&amp;|;s|\.o$||&#39;`;\
g++ -DHAVE_CONFIG_H -I.     -g -O2 -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT -DHAVE_SDL -I/usr/include -DHAVE_PCAP  -DHAVE_X11 -pthread -MT AliM1543C.o -MD -MP -MF $depbase.Tpo -c -o AliM1543
C.o AliM1543C.cpp &amp;&amp;\
mv -f $depbase.Tpo $depbase.Po
AliM1543C.cpp: In member function &#39;virtual int CAliM1543C::RestoreState(FILE*)&#39;:
AliM1543C.cpp:1237:33: warning: ignoring return value of &#39;size_t fread(void*, size_t, size_t, FILE*)&#39;, declared with attribute warn_unused_result [-Wunused-result]
   fread(&amp;ss, sizeof(long), 1, f);
                                 ^
AliM1543C.cpp:1250:37: warning: ignoring return value of &#39;size_t fread(void*, size_t, size_t, FILE*)&#39;, declared with attribute warn_unused_result [-Wunused-result]
   fread(&amp;state, sizeof(state), 1, f);
                                     ^
depbase=`echo AliM1543C_ide.o | sed &#39;s|[^/]*$|.deps/&amp;|;s|\.o$||&#39;`;\
g++ -DHAVE_CONFIG_H -I.     -g -O2 -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT -DHAVE_SDL -I/usr/include -DHAVE_PCAP  -DHAVE_X11 -pthread -MT AliM1543C_ide.o -MD -MP -MF $depbase.Tpo -c -o AliM
1543C_ide.o AliM1543C_ide.cpp &amp;&amp;\
mv -f $depbase.Tpo $depbase.Po
AliM1543C_ide.cpp: In member function &#39;virtual int CAliM1543C_ide::RestoreState(FILE*)&#39;:
AliM1543C_ide.cpp:484:33: warning: ignoring return value of &#39;size_t fread(void*, size_t, size_t, FILE*)&#39;, declared with attribute warn_unused_result [-Wunused-result]
   fread(&amp;ss, sizeof(long), 1, f);
[...]
.
o es40-cfg.cpp &amp;&amp;\
mv -f $depbase.Tpo $depbase.Po
g++  -g -O2 -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT -DHAVE_SDL -I/usr/include -DHAVE_PCAP  -DHAVE_X11 -pthread   -o es40_cfg es40-cfg.o base/Exception.o  -L/usr/lib/x86_64-linux-gnu -lSDL -
L/usr/ng/lib -lpcap -lX11
make[2]: Leaving directory &#39;/home/username/tmp/es40/src&#39;
make[1]: Leaving directory &#39;/home/username/tmp/es40/src&#39;
Making all in doc
make[1]: Entering directory &#39;/home/username/tmp/es40/doc&#39;
make[1]: Nothing to be done for &#39;all&#39;.
make[1]: Leaving directory &#39;/home/username/tmp/es40/doc&#39;
make[1]: Entering directory &#39;/home/username/tmp/es40&#39;
make[1]: Nothing to be done for &#39;all-am&#39;.
make[1]: Leaving directory &#39;/home/username/tmp/es40&#39;
</code></pre>

<p>So it seems it worked? At least in the <code>src/</code> folder there now are binaries.</p>

<h3 id="toc_3">SIGSEGV</h3>

<p>Lets try to run the compiled binary:</p>

<pre><code>$ ./src/es40
</code></pre>

<p>Output:</p>

<pre><code>   **======================================================================**
   ||                             ES40  emulator                           ||
   ||                              Version 0.18+                           ||
   ||                                                                      ||
   ||  Copyright (C) 2007-2008 by the ES40 Emulator Project                ||
   ||  Website: http://sourceforge.net/projects/es40                       ||
   ||  E-mail : camiel@camicom.com                                         ||
   ||                                                                      ||
   ||  This program is free software; you can redistribute it and/or       ||
   ||  modify it under the terms of the GNU General Public License         ||
   ||  as published by the Free Software Foundation; either version 2      ||
   ||  of the License, or (at your option) any later version.              ||
   **======================================================================**


Segmentation fault (core dumped)
</code></pre>

<p>My favorite program output, I love me a good segfault. Lets debug with <code>strace</code>.</p>

<ul>
<li><code>-f</code>: Follow threads and child processes that are created</li>
<li><code>-T</code>: Print time spent in system call</li>
<li><code>-e trace=open,read,write,close</code>: Trace only specific system calls</li>
</ul>

<p>strace -Tfe trace=open,read,write,close ./src/es40</p>

<p>Relevant output:</p>

<pre><code>open(&quot;./es40.cfg&quot;, O_RDONLY)            = -1 ENOENT (No such file or directory)
open(&quot;/etc/es40.cfg&quot;, O_RDONLY)         = -1 ENOENT (No such file or directory)
open(&quot;/usr/etc/es40.cfg&quot;, O_RDONLY)     = -1 ENOENT (No such file or directory)
open(&quot;/usr/local/etc/es40.cfg&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/local/etc/es40.cfg&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0} ---
+++ killed by SIGSEGV (core dumped) +++
Segmentation fault (core dumped)
</code></pre>

<p>So maybe it is missing the configuration. I did not do a <code>make install</code> since I
hoped that would&#39;t be needed. Using <code>checkinstall</code> we can create a debian
package. I like that over just a <code>make install</code> since it allows you to remove
the software from your system and overall general house keeping. After
<code>checkinstall</code> I copied the provided default configuration:</p>

<pre><code>cp src/es40.cfg /etc/es40.cfg
</code></pre>

<p>Since there is no documentation on the configuration format, I&#39;ll run it and see
where the ship sails.</p>

<p>Let&#39;s run it again.</p>

<pre><code>es40
</code></pre>

<p>Output:</p>

<pre><code>   **======================================================================**
   ||                             ES40  emulator                           ||
   ||                              Version 0.18+                            ||
   ||                                                                      ||
   ||  Copyright (C) 2007-2008 by the ES40 Emulator Project                ||
   ||  Website: http://sourceforge.net/projects/es40                       ||
   ||  E-mail : camiel@camicom.com                                         ||
   ||                                                                      ||
   ||  This program is free software; you can redistribute it and/or       ||
   ||  modify it under the terms of the GNU General Public License         ||
   ||  as published by the Free Software Foundation; either version 2      ||
   ||  of the License, or (at your option) any later version.              ||
   **======================================================================**


%GUI-I-INS: Installing sdl module as the ES40 GUI
sys0(tsunami): $Id: System.cpp,v 1.79 2008/06/12 07:29:44 iamcamiel Exp $
%FLS-F-NOREST: Flash could not be restored from rom\flash.rom
sys0(tsunami): $Id: Flash.cpp,v 1.19 2008/03/24 22:11:50 iamcamiel Exp $
dma: $Id: DMA.cpp,v 1.9 2008/04/29 09:24:52 iamcamiel Exp $
pci0.15(ali_ide).disk0.0(file): Could not open file img\disk0.img!
pci0.15(ali_ide).disk0.0(file): writing 600 1kB blocks: 100%
pci0.15(ali_ide).disk0.0(file): 600 MB file img\disk0.img created.
pci0.15(ali_ide).disk0.0(file): Mounted file img\disk0.img, 1228800 512-byte blocks, 1536/16/50.
pci0.15(ali_ide).disk1.0(file): Could not open file img\vms83.iso!
*** Error in `es40&#39;: double free or corruption (fasttop): 0x0000000001167df0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f8245d977e5]
/lib/x86_64-linux-gnu/libc.so.6(+0x8037a)[0x7f8245da037a]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7f8245da453c]
es40[0x43b4b3]
es40[0x4321cf]
es40[0x4319b8]
es40[0x4319b8]
es40[0x432f80]
es40(main+0x19f)[0x40573f]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7f8245d40830]
es40[0x405c09]
======= Memory map: ========
00400000-00497000 r-xp 00000000 00:00 489903                     /usr/local/bin/es40
00696000-00697000 r--p 00096000 00:00 489903                     /usr/local/bin/es40
00697000-0069d000 rw-p 00097000 00:00 489903                     /usr/local/bin/es40
0069d000-006bf000 rw-p 00000000 00:00 0
010c3000-01188000 rw-p 00000000 00:00 0                          [heap]
7f81fc000000-7f81fc021000 rw-p 00000000 00:00 0
</code></pre>

<p>The output gave a lot more debug information, the actual relevant issue was at
the top:</p>

<pre><code>Could not open file img\vms83.iso!
</code></pre>

<p>From the HP hobbyist download server I downloaded the <code>ALPHA084.ISO</code> file. Copy
it to the right place and edit <code>es40.cfg</code> to reflect the correct filesystem
path.</p>

<p>Run it again and see what breaks:</p>

<pre><code>%GUI-I-INS: Installing sdl module as the ES40 GUI
sys0(tsunami): $Id: System.cpp,v 1.79 2008/06/12 07:29:44 iamcamiel Exp $
%FLS-F-NOREST: Flash could not be restored from rom\flash.rom
sys0(tsunami): $Id: Flash.cpp,v 1.19 2008/03/24 22:11:50 iamcamiel Exp $
dma: $Id: DMA.cpp,v 1.9 2008/04/29 09:24:52 iamcamiel Exp $
pci0.15(ali_ide).disk0.0(file): Could not open file img\disk0.img!
pci0.15(ali_ide).disk0.0(file): writing 600 1kB blocks: 100%
pci0.15(ali_ide).disk0.0(file): 600 MB file img\disk0.img created.
pci0.15(ali_ide).disk0.0(file): Mounted file img\disk0.img, 1228800 512-byte blocks, 1536/16/50.
pci0.15(ali_ide).disk1.0(file): Mounted file ALPHA084.ISO, 337251 2048-byte blocks, 112417/3/1.
Emulator Failure: Illegal state: More than one SCSI device at the same ID: SCSIBus.cpp, line 78
Segmentation fault (core dumped)
</code></pre>

<p>There is an IDE controller defined in the config and an SCSI controller. Comment
out the SCSI controller:</p>

<pre><code>  // Symbios SCSI controller
  //
  // There are two flavors of SCSI controllers on the emulator; 53c810
  // and 53c895. The 53c810 supports 7 disks (0.0..0.6), the 53c895
  // supports 15 disks (0.0..0.6 and 0.8..0.15).
  //
  // Right now, the 53c810 is the only controller that works with OpenVMS.
//  pci0.3 = sym53c810
//  {
//   disk0.0 = file
//    {
//      file =          &quot;img\dka0.img&quot;;
//      read_only  
//    }
//  }
</code></pre>

<p>The next issue had to do with another file not found:</p>

<pre><code>%GUI-I-INS: Installing sdl module as the ES40 GUI
sys0(tsunami): $Id: System.cpp,v 1.79 2008/06/12 07:29:44 iamcamiel Exp $
%FLS-F-NOREST: Flash could not be restored from rom\flash.rom
sys0(tsunami): $Id: Flash.cpp,v 1.19 2008/03/24 22:11:50 iamcamiel Exp $
dma: $Id: DMA.cpp,v 1.9 2008/04/29 09:24:52 iamcamiel Exp $
pci0.15(ali_ide).disk0.0(file): Mounted file img\disk0.img, 1228800 512-byte blocks, 1536/16/50.
pci0.15(ali_ide).disk1.0(file): Mounted file ALPHA084.ISO, 337251 2048-byte blocks, 112417/3/1.
pci0.15(ali_ide).disk1.1(ramdisk): Mounted RAMDISK, 20480 512-byte blocks, 32/16/40.
pci0.19(ali_usb): $Id: AliM1543C_usb.cpp,v 1.6 2008/03/14 15:30:50 iamcamiel Exp $
%DPR-F-NOREST: DPR could not be restored from rom\dpr.rom
sys0(tsunami): $Id: DPR.cpp,v 1.23 2008/06/12 07:29:44 iamcamiel Exp $
cpu0(ev68cb)(0): $Id: AlphaCPU.cpp,v 1.82 2009/03/16 01:33:27 iamcamiel Exp $
cpu1(ev68cb)(1): $Id: AlphaCPU.cpp,v 1.82 2009/03/16 01:33:27 iamcamiel Exp $
pci0.7(ali): $Id: AliM1543C.cpp,v 1.66 2008/05/31 15:47:07 iamcamiel Exp $
kbc: $Id: Keyboard.cpp,v 1.10 2008/05/31 15:47:09 iamcamiel Exp $
%IDE-I-INIT: New IDE emulator initialized.
Emulator Failure: File not found: cirrus rom file rom\vgabios-0.6a.debug.bin not found.: Cirrus.cpp, line 295
Stop threads:
Freeing memory in use by system...
pci0.15(ali_ide).disk0.0(file): Closing file.
*** Error in `es40&#39;: double free or corruption (fasttop): 0x0000000001f53aa0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f6f1a9977e5]
/lib/x86_64-linux-gnu/libc.so.6(+0x8037a)[0x7f6f1a9a037a]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7f6f1a9a453c]
es40[0x43ade9]
es40[0x45597f]
</code></pre>

<p>In this case the VGA bios. Later on I ended up turning this off, but for now
lets download it:</p>

<pre><code>wget http://savannah.gnu.org/download/vgabios/vgabios-0.6a.debug.bin -O &quot;rom\vgabios-0.6a.debug.bin&quot;
</code></pre>

<p>To skip ahead to a working situation, comment out these sections as well:</p>

<pre><code>//  pci0.4 = dec21143 {
// }
</code></pre>

<p>and</p>

<pre><code>//    action = &quot;&quot;&quot;c:\Program Files\PuTTY\putty.exe&quot;&quot; telnet://localhost:21264&quot;;
//    action = &quot;&quot;&quot;c:\Program Files\PuTTY\putty.exe&quot;&quot; telnet://localhost:21265&quot;;
</code></pre>

<p>and</p>

<pre><code>//  pci0.2 = cirrus
//  {
//    rom = &quot;rom\vgabios-0.6a.debug.bin&quot;;
//  }
</code></pre>

<p>As you might have guessed I had to figure out all these issues by slowly
tweaking the configuration until it booted up.</p>

<h3 id="toc_4">Configuration that boots without segfaults</h3>

<p>Our configuration now looks like this:</p>

<pre><code>  //gui = sdl
  {
    keyboard.use_mapping = false;
    keyboard.map = &quot;keys.map&quot;;
  }
  sys0 = tsunami
  {
    rom.srm = &quot;cl67srmrom.exe&quot;;
    rom.decompressed = &quot;decompressed.rom&quot;;
    rom.flash = &quot;flash.rom&quot;;
    rom.dpr = &quot;rdpr.rom&quot;;
    memory.bits = 30;
    cpu0 = ev68cb
    {
      icache = true;
      speed = 800M;
    }
    cpu1 = ev68cb
    {
      icache = true;
      speed = 800M;
    }
    pci0.7 = ali{
      mouse.enabled = true;
      lpt.outfile = &quot;lpt.out&quot;;
    }
    pci0.15 = ali_ide
    {
      disk0.0 = file
      {
        file =          &quot;disk0.img&quot;;
        serial_number = &quot;VMS&quot;;
        rev_number    = &quot;8.4&quot;;
        model_number  = &quot;OpenVMS8.3&quot;;
        read_only     = false;
        cdrom         = false;
        autocreate_size = 600M;
      }
      disk1.0 = file
      {
        file =          &quot;ALPHA084.ISO&quot;;
        read_only     = true;
        cdrom         = true;
      }
      disk1.1 = ramdisk
      {
        size = 10M;
      }
    }
    pci0.19 = ali_usb {}
    serial0 = serial {
      port = 21264;
    }
  }
</code></pre>

<h3 id="toc_5">SRM (System Reference Manual) firmware</h3>

<p>The emulator needs special firmware <a href="ftp://ftp.hp.com/pub/alphaserver/firmware/current_platforms/v7.3_release/ES40_series/updateviawindows-es40.html">from HP</a>, the SRM.</p>

<p>The SRM firmware (also called the SRM console) is the boot firmware written by
DEC for systems based on the Alpha AXP microprocessor. The acronym SRM is
derived from the phrase Alpha System Reference Manual, the publication detailing
the Alpha AXP architecture and which specified various features of the SRM
firmware. The SRM console was initially designed to boot DEC&#39;s OSF/1 AXP (later
called Digital UNIX and finally Tru64 UNIX) and OpenVMS operating systems,
although various other operating systems (such as Linux, NetBSD, OpenBSD, and
FreeBSD, for example) were also written to boot from the SRM console. The third
proprietary operating system published for the Alpha AXP architecture -
Microsoft Windows NT - did not boot from SRM; instead, Windows booted from the
ARC (multi platform &quot;Advanced RISC Computing&quot;) boot firmware. (ARC is also known
as AlphaBIOS.)</p>

<p>When the system is booted, the SRM console is displayed as a blue screen with a
prompt. The prompt looks like <code>P00&gt;&gt;&gt;</code> (the <code>00</code> indicates the primary
processor). On multi-processor machines, the prompt could be <code>P01&gt;&gt;&gt;</code>, <code>P02&gt;&gt;&gt;</code>,
etc. It views your NVRAM and devices as a pseudo-filesystem. You can see this if
you use the <code>ls</code> command. Also, it contains a fairly large set of diagnostic,
setup, and debugging utilities As well, SRM has environment variables, a number
of which are pre-defined and correspond to locations in NVRAM. You can view the
entire list of environment variables and their values with the <code>show</code> command
(there are quite a few of them, so you will probably want to pipe its output to
<code>more</code>). You can also show variables matching a &quot;glob&quot; pattern, for example,
<code>show boot*</code> will show all the variables starting in &quot;boot&quot;. Read more about the
<a href="https://web.archive.org/web/20140106183813/http://www.alphalinux.org/faq/SRM-HOWTO/srm-whatis.html">SRM here</a> or <a href="https://en.wikipedia.org/wiki/System_Reference_Manual">on wikipedia</a>.</p>

<p>Download rom image <a href="https://raymii.org/s/inc/downloads/es40-srmon/cl67srmrom.exe">from here: cl67srmrom.exe</a>. It can be found on HP&#39;s
public FTP servers as well if needed, see the link above.</p>

<p>Make sure the filename in the configuration matches:</p>

<pre><code>rom.srm = &quot;cl67srmrom.exe&quot;;
</code></pre>

<h3 id="toc_6">Boot up es40, finally</h3>

<p>Now that we have a configuration file that does not cause a segfault, we can
boot up and connect to telnet to access the emulator.</p>

<pre><code>  $ es40
</code></pre>

<p>Output:</p>

<pre><code>     **======================================================================**
     ||                             ES40  emulator                           ||
     ||                              Version 0.18+                            ||
     ||                                                                      ||
     ||  Copyright (C) 2007-2008 by the ES40 Emulator Project                ||
     ||  Website: http://sourceforge.net/projects/es40                       ||
     ||  E-mail : camiel@camicom.com                                         ||
     ||                                                                      ||
     ||  This program is free software; you can redistribute it and/or       ||
     ||  modify it under the terms of the GNU General Public License         ||
     ||  as published by the Free Software Foundation; either version 2      ||
     ||  of the License, or (at your option) any later version.              ||
     **======================================================================**


  %GUI-I-INS: Installing sdl module as the ES40 GUI
  sys0(tsunami): $Id: System.cpp,v 1.79 2008/06/12 07:29:44 iamcamiel Exp $
  %FLS-F-NOREST: Flash could not be restored from rom\flash.rom
  sys0(tsunami): $Id: Flash.cpp,v 1.19 2008/03/24 22:11:50 iamcamiel Exp $
  dma: $Id: DMA.cpp,v 1.9 2008/04/29 09:24:52 iamcamiel Exp $
  pci0.15(ali_ide).disk0.0(file): Mounted file img\disk0.img, 1228800 512-byte blocks, 1536/16/50.
  pci0.15(ali_ide).disk1.0(file): Mounted file ALPHA084.ISO, 337251 2048-byte blocks, 112417/3/1.
  pci0.15(ali_ide).disk1.1(ramdisk): Mounted RAMDISK, 20480 512-byte blocks, 32/16/40.
  pci0.19(ali_usb): $Id: AliM1543C_usb.cpp,v 1.6 2008/03/14 15:30:50 iamcamiel Exp $
  %DPR-F-NOREST: DPR could not be restored from rom\dpr.rom
  sys0(tsunami): $Id: DPR.cpp,v 1.23 2008/06/12 07:29:44 iamcamiel Exp $
  cpu0(ev68cb)(0): $Id: AlphaCPU.cpp,v 1.82 2009/03/16 01:33:27 iamcamiel Exp $
  cpu1(ev68cb)(1): $Id: AlphaCPU.cpp,v 1.82 2009/03/16 01:33:27 iamcamiel Exp $
  pci0.7(ali): $Id: AliM1543C.cpp,v 1.66 2008/05/31 15:47:07 iamcamiel Exp $
  kbc: $Id: Keyboard.cpp,v 1.10 2008/05/31 15:47:09 iamcamiel Exp $
  %IDE-I-INIT: New IDE emulator initialized.
  pci0.2(cirrus): $Id: Cirrus.cpp,v 1.23 2008/05/31 15:47:09 iamcamiel Exp $
  %SYS-I-READROM: Reading original ROM image from cl67srmrom.exe.
  %SYS-I-DECOMP: Decompressing ROM image.
  0%....10%....20%....30%....40%....50%....60%....70%....80%....90%......100%
  %SYS-I-ROMWRT: Writing decompressed rom to rom\decompressed.rom.
  %SYM-I-PATCHROM: Patching ROM for speed.
  %SYS-I-ROMLOADED: ROM Image loaded successfully!
  %DPR-F-NOREST: DPR could not be restored from rom\dpr.rom
  sys0(tsunami): $Id: DPR.cpp,v 1.23 2008/06/12 07:29:44 iamcamiel Exp $
  Start threads: cpu0 cpu1 ali kbd ide0 ide1 cirrus
</code></pre>

<p>It will wait with booting until you connect to telnet, then it will boot
through:</p>

<pre><code>  serial0(serial): Waiting for connection on port 21264.
  serial0(serial): $Id: Serial.cpp,v 1.51 2008/06/03 09:07:56 iamcamiel Exp $
  %SYS-I-READROM: Reading decompressed ROM image from rom\decompressed.rom.
  %SYM-I-PATCHROM: Patching ROM for speed.
  %SYS-I-ROMLOADED: ROM Image loaded successfully!
  dpr: 16384 bytes restored.
  %DPR-I-RESTST: DPR state restored from rom\dpr.rom
  sys0(tsunami): $Id: DPR.cpp,v 1.23 2008/06/12 07:29:44 iamcamiel Exp $
  Start threads: cpu0 ali kbd ide0 ide1 srl0
  *** CPU0 *** STARTING ***
  Arbitration 0000000000010000 from CPU 0 (@13e39)... won  0000000800010000
  Arbitration clear from CPU 0 (@13f55).
  Arbitration 0000000000010000 from CPU 0 (@13351)... won  0000000800010000
  Arbitration clear from CPU 0 (@133b9).
  Arbitration 0000000000010000 from CPU 0 (@13351)... won  0000000800010000
  Arbitration clear from CPU 0 (@133b9).
  Arbitration 0000000000010000 from CPU 0 (@13351)... won  0000000800010000
  Arbitration clear from CPU 0 (@133b9).
</code></pre>

<p>Connect to telnet on port 21264 from a different terminal:</p>

<pre><code>$ telnet 127.0.0.1 21264
</code></pre>

<p>Output:</p>

<pre><code>Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is &#39;^]&#39;.
     This is serial port #0 on ES40 Emulator
</code></pre>

<p>Quoting from the <a href="http://es40.org">es40</a> site:</p>

<blockquote>
<p>The port 21264 was choosen on purpose. Actually this was the first EV6 Alpha
processor CPU model number.</p>
</blockquote>

<p>There seems to be a GUI option, but that window was very tall and small and was
not resizable. I therefore choose to use telnet only.</p>

<h3 id="toc_7">SYSFAULT CPU1 - pc = 001a0e84</h3>

<p>The boot continued, and I was happy:</p>

<pre><code>     OpenVMS PALcode V  1  .  9  8  -  1  0  4    , Tru64 UNIX PALcode V 1  .  9  2  -  1  0  5

       starting console on CPU 0
initialized idle PCB
initializing semaphores
initializing heap
initial heap 240c0
memory low limit = 1b0000 heap = 240c0, 17fc0
initializing driver structures
initializing idle process PID
initializing file system
initializing hardware
initializing timer data structures
lowering IPL
CPU 0 speed is 800 MHz
create dead eater
create poll
create timer
create powerup
access NVRAM
Memory size 1024 MB
testing memory
..

probe I/O subsystem
probing hose 1, PCI
probing hose 0, PCI
probing PCI-to-ISA bridge, bus 1
bus 0, slot 15 -- dqa -- Acer Labs M1543C IDE
bus 0, slot 15 -- dqb -- Acer Labs M1543C IDE
starting drivers
entering idle loop
starting console on CPU 1
initialized idle PCB
initializing idle process PID
lowering IPL

[...]

SYSFAULT CPU1 - pc = 001a0e84

exception context saved starting at 001ACD10

  CPU 1 speed is 7692 MHz
  create powerup
</code></pre>

<p>And it hang. My happiness was short. Searching around the internet lead me to
<a href="https://web.archive.org/web/20180424175732/https://support.hpe.com/hpsc/doc/public/display?docId=emr_na-c03082736">the following support information</a>. It states:</p>

<blockquote>
<p>This is not an error caused by a hardware failure. The SRM console decreases
or increases its dynamic memory allocation (called heap space) to accomodate the
hardware configuration, to include the PCI devices installed. The system will
add 64kb of heap space for each re-init until it has adequate space. A few re-
inits are possible until it has enough.</p>
</blockquote>

<p>The windows way of solving problems. Reboot until it works. I tried it a few
times, and suprisingly, it worked.</p>

<pre><code>     OpenVMS PALcode V  1  .  9  8  -  1  0  4    , Tru64 UNIX PALcode V 1  .  9  2  -  1  0  5

       starting console on CPU 0
initialized idle PCB
initializing semaphores
initializing heap
initial heap 240c0
memory low limit = 1b0000 heap = 240c0, 17fc0
initializing driver structures
initializing idle process PID
initializing file system
initializing hardware
initializing timer data structures
lowering IPL
CPU 0 speed is 800 MHz
create dead eater
create poll
create timer
create powerup
access NVRAM
Memory size 1024 MB
testing memory
...
probe I/O subsystem
probing hose 1, PCI
probing hose 0, PCI
probing PCI-to-ISA bridge, bus 1
bus 0, slot 15 -- dqa -- Acer Labs M1543C IDE
bus 0, slot 15 -- dqb -- Acer Labs M1543C IDE
starting drivers
entering idle loop
starting console on CPU 1
initialized idle PCB
initializing idle process PID
lowering IPL
*** system serial number not set. use set sys serial num command.
Partition 0, Memory base: 000000000, size: 040000000
initializing GCT/FRU at 1c8000
Initializing dqa dqb
Memory Testing and Configuration Status
  Array       Size       Base Address    Intlv Mode
---------  ----------  ----------------  ----------
    0       1024Mb     0000000000000000    4-Way

     1024 MB of System Memory
Testing the System
[...]
</code></pre>

<p>And at last, it dropped me into the SRM prompt:</p>

<pre><code>AlphaServer ES40 Console V7.3-1, built on Feb 27 2007 at 12:57:47
P00&gt;&gt;&gt;
</code></pre>

<p>Using the reference manual I found out that you have to issue a boot command
with a device. Use <code>show dev</code> to show all devices</p>

<pre><code>P00&gt;&gt;&gt;show dev
dqa0.0.0.15.0              DQA0                    OpenVMS8 .3
dqb0.0.1.15.0              DQB0                  ALPHA084 .ISO
dqb1.1.1.15.0              DQB1                   ES40RAMD ISK
dva0.0.0.1000.0            DVA0
P00&gt;&gt;&gt;
</code></pre>

<p>Since we want to boot from the ISO, our boot device is <code>DQB0</code>:</p>

<pre><code>P00&gt;&gt;&gt;boot dqb0
(boot dqb0.0.1.15.0 -flags 0)

block 0 of dqb0.0.1.15.0 is a valid boot block

reading 1230 blocks from dqb0.0.1.15.0
bootstrap code read in
base = 200000, image start = 0, image bytes = 99c00(629760)
initializing HWRPB at 2000
initializing page table at 3ff54000
initializing machine state
setting affinity to the primary CPU
jumping to bootstrap code

CPU 1 unable to complete console mode transition 1
CPU 1: begin = 501958484969, end = 525958485958, delta = 24000000989

CPU 1 unable to complete console mode transition 2
CPU 1: begin = 525961938442, end = 549961938919, delta = 24000000477

SYSFAULT CPU0 - pc = 001a0e84

exception context saved starting at 0002D9E0
</code></pre>

<p>A CPU error? Searching the internet gave no real help so I decided to comment
out the second CPU from the config, so that we emulate a single CPU machine:</p>

<pre><code>//cpu1 = ev68cb
//{
//  icache = false;
//  speed = 800M;
//}
</code></pre>

<h3 id="toc_8">Installing OpenVMS 8.4</h3>

<p>Finally, after a few hours of compiling, tinkering and tweaking, it boots up!</p>

<pre><code>       OpenVMS (TM) Alpha Operating System, Version V8.4
      Copyright 1976-2010 Hewlett-Packard Development Company, L.P.


Please enter date and time (DD-MMM-YYYY  HH:MM)
</code></pre>

<p>This looks like a normal installation screen. Yay! It is very slow however, it
takes almost 10 seconds after I entered the date for the next line of text to
show up.</p>

<pre><code>Please enter date and time (DD-MMM-YYYY  HH:MM)  24-APR-2018 21:12



    Installing required known files...

    Configuring devices...



    ****************************************************************

    You can install or upgrade the OpenVMS ALPHA operating system
    or you can install or upgrade layered products that are included
    on the OpenVMS ALPHA distribution media (CD/DVD).

    You can also execute DCL commands and procedures to perform
    &quot;standalone&quot; tasks, such as backing up the system disk.

    Please choose one of the following:

        1)  Upgrade, install or reconfigure OpenVMS ALPHA Version V8.4
        2)  Display layered products that this procedure can install
        3)  Install or upgrade layered products
        4)  Show installed products
        5)  Reconfigure installed products
        6)  Remove installed products
        7)  Find, Install or Undo patches; Show or Delete Recovery Data
        8)  Execute DCL commands and procedures
        9)  Shut down this system

Enter CHOICE or ? for help: (1/2/3/4/5/6/7/8/9/?)
</code></pre>

<p>We want to install, so choose 1.</p>

<pre><code> ***********************************************************

    This procedure will ask a series of questions.

          () - encloses acceptable answers
          [] - encloses default answers

    Type your response and press the &lt;Return&gt; key.  Type:

          ? - to repeat an explanation
          ^ - to change prior input (not always possible)
          Ctrl/Y - to exit the installation procedure

    There are two choices for installation/upgrade:

    Initialize - Removes all software and data files that were
        previously on the target disk and installs OpenVMS ALPHA.

    Preserve -- Installs or Upgrades OpenVMS ALPHA on the target disk
        and retains all other contents of the target disk.

   * Note: You cannot use preserve to install OpenVMS ALPHA on a disk on
        which any other operating system is installed.  This includes
        implementations of OpenVMS for other architectures.

Do you want to INITIALIZE or to PRESERVE? [PRESERVE] INITIALIZE
</code></pre>

<p>This is a new installation, so wipe all the things.</p>

<pre><code>Enter device name for target disk: (? for choices) DQA0
</code></pre>

<p>Our boot device is the CDROM, <code>DQB0</code>, the prompt earlier shows <code>DQA0</code> as the
(virtual) disk.</p>

<pre><code>Enter volume label for target system disk: [ALPHASYS] username2
</code></pre>

<p>If you&#39;re going to cluster, every disk must have a unique name. I tend to go
with the system hostname as system disk name.</p>

<pre><code>    The target system disk can be initialized with On-Disk Structure
    Level 2 (ODS-2) or Level 5 (ODS-5).  (? for more information)

Do you want to initialize with ODS-2 or ODS-5? (2/5/?) 5
</code></pre>

<p>ODS, meaning <code>on disk structure</code>, is part of the <code>Files-11</code> filesystem. Compare
it with <code>ext2/3/4</code>.</p>

<p>&quot;Files-11&quot; is the general term for five separate file systems, known as on-disk
&quot;structure (ODS) levels 1 through 5.</p>

<ul>
<li>ODS-1 is the flat file system used by the RSX-11 OS, supported by older VMS systems for RSX compatibility, but never used to support VMS itself; it has been largely superseded by ODS-2 and ODS-5.</li>
<li>ODS-2 is the standard VMS file system, and remains the most common file system for system disks (the disk on which the operating system is installed).</li>
<li>Although seldom referred to by their ODS level designations, ODS-3 and ODS-4 are the Files-11 support for the CD-ROM ISO 9660 and High Sierra Format file systems, respectively.</li>
<li>ODS-5 is an extended version of ODS-2 available on Alpha and IA-64 platforms which adds support for case-preserving filenames with non-ASCII characters and improvements to the hierarchical directory support. </li>
</ul>

<p><a href="https://en.wikipedia.org/wiki/Files-11#Overview">Read more here</a></p>

<pre><code>Do you want to enable hard links? (Yes/No/?) yes
</code></pre>

<p>Not sure what the impact is but lets do it. Enable those hard links.</p>

<pre><code>    You have chosen to install OpenVMS ALPHA on a new disk.

    The target system disk, DQA0:, will be initialized
    with structure level 5 (ODS-5).
    Hard links WILL be enabled.
    The disk will be labeled username2.
    Any data currently on the target system disk will be lost.

Is this OK? (Yes/No) yes
</code></pre>

<p>This is an overview of what we selected. Go ahead.</p>

<pre><code>    Initializing and mounting target....
%MOUNT-F-ACCVIO, access violation, reason mask=!XB, virtual address=!XH, PC=!XH, PS=!XL

    DQA0: was previously selected as the target system.
    DQA0: has been modified.

    If you need to return the target system to its original state,
    you may need to restore your backup of the target system.

    If you want to re-do the installation, HP recommends that you
    restore your backup of the target system.  Repeating the
    installation may succeed, but it may also introduce subtle problems.
</code></pre>

<p>A failure again? Remember, I&#39;m several hours into this project without success.
Let&#39;s try again then.</p>

<pre><code>Enter device name for target disk: [DQA0] (? for choices) ?

Device                  Device           Error    Volume         Free  Trans Mnt
 Name                   Status           Count     Label        Blocks Count Cnt
DQB0:                   Mounted wrtlck       0  ALPHA084        135393    79   1
DQB1:                   Online               0
DVA0:                   Offline              0
DQA0:                   Online               0
DQA1:                   Offline              1
DAD0:                   Online               0


    ? was previously selected as the target system.
    ? has been modified.

    If you need to return the target system to its original state,
    you may need to restore your backup of the target system.

    If you want to re-do the installation, HP recommends that you
    restore your backup of the target system.  Repeating the
    installation may succeed, but it may also introduce subtle problems.


Enter device name for target disk: [DQA0] (? for choices)

    DQA0: is now labeled username2.

Do you want to keep this label? (Yes/No) [Yes]

    The target system disk can be initialized with On-Disk Structure
    Level 2 (ODS-2) or Level 5 (ODS-5).  (? for more information)

Do you want to initialize with ODS-2 or ODS-5? (2/5/?) 5

    Hard links can be enabled on ODS-5 disks.  (? for more information)

Do you want to enable hard links? (Yes/No/?) yes


    You have chosen to install OpenVMS ALPHA on a new disk.

    The target system disk, DQA0:, will be initialized
    with structure level 5 (ODS-5).
    Hard links will NOT be enabled.
    The disk will be labeled username2.
    Any data currently on the target system disk will be lost.

Is this OK? (Yes/No) yes

    Initializing and mounting target....

    Creating page and swap files....
</code></pre>

<p>That&#39;s weird, none of my choices were different but the result is that it does
continue with the installation.</p>

<pre><code>    You must enter a password for the SYSTEM account.

    The password must be a minimum of 8 characters in length, and
    may not exceed 31 characters.  It will be checked and verified.
    The system will not accept passwords that can be guessed easily.

    The password will not be displayed as you enter it.

 Password for SYSTEM account:

Re-enter SYSTEM password for verification:
</code></pre>

<p>This is just like the OpenVMS 7.3 install. Enter a system password.</p>

<pre><code>Will this system be a member of an OpenVMS Cluster? (Yes/No)

Will this system be an instance in an OpenVMS Galaxy? (Yes/No) no
</code></pre>

<p>Clustering will be configured later.</p>

<pre><code>    For your system to operate properly, you must set two parameters:
    SCSNODE and SCSSYSTEMID.

    SCSNODE can be from 1 to 6 letters or numbers.  It must contain at
    least one letter.

    If you plan to use DECnet, SCSNODE must be the DECnet Phase IV
    node name, or the DECnet-Plus (Phase V) node synonym.

    If you have multiple OpenVMS systems, the SCSNODE on each system
    must be unique.

Enter SCSNODE: username2

    If you plan to use DECnet, SCSSYSTEMID must be set based on the
    DECnet Phase IV address.

Do you plan to use DECnet? (Yes/No) [Yes] yes

    DECnet Phase IV addresses are in the format

        DECnet area number.DECnet node number

    DECnet area number is a number between 1 and 63.
    DECnet node number is a number between 1 and 1023.

    If you plan to use DECnet WITHOUT Phase IV compatible addresses,
    enter 0.0.


Enter DECnet (Phase IV) Address: [1.1]

      SCSSYSTEMID will be set to 1025.

      This was calculated as follows:

          (DECnet area number * 1024) + DECnet node number
</code></pre>

<p>This is the networking stuff for DECnet. Since this is a test setup we can use
the defaults.</p>

<pre><code>  Configuring the Local Time Zone


TIME ZONE SPECIFICATION -- MAIN Time Zone Menu            &quot;*&quot; indicates a menu

  0* GMT
  1* AFRICA          17) EST             33) IRAN            49) PORTUGAL
  2* AMERICA         18) EST5EDT         34) ISRAEL          50) PRC
  3* ANTARCTICA      19* ETC             35) JAMAICA         51) PST8PDT
  4* ARCTIC          20* EUROPE          36) JAPAN           52) ROC
  5* ASIA            21) FACTORY         37) KWAJALEIN       53) ROK
  6* ATLANTIC        22) GB-EIRE         38) LIBYA           54) SINGAPORE
  7* AUSTRALIA       23) GB              39) MET             55) TURKEY
  8* BRAZIL          24) GMT-0           40* MEXICO          56) UCT
  9* CANADA          25) GMT             41* MIDEAST         57) UNIVERSAL
 10) CET             26) GMT0            42) MST             58* US
 11* CHILE           27) GMTPLUS0        43) MST7MDT         59) UTC
 12) CST6CDT         28) GREENWICH       44) NAVAJO          60) W-SU
 13) CUBA            29) HONGKONG        45) NZ-CHAT         61) WET
 14) EET             30) HST             46) NZ              62) ZULU
 15) EGYPT           31) ICELAND         47* PACIFIC
 16) EIRE            32* INDIAN          48) POLAND

Press &quot;Return&quot; to redisplay, enter &quot;=&quot; to search or &quot;?&quot; for help, or
Select the number above that best represents the desired time zone: 0

ETC Time Zone Menu                                        &quot;*&quot; indicates a menu

  0* RETURN TO MAIN TIME ZONE MENU
  1) GMT-0           10) GMT-4           19) GMTPLUS1        28) GMTPLUS7
  2) GMT-1           11) GMT-5           20) GMTPLUS10       29) GMTPLUS8
  3) GMT-10          12) GMT-6           21) GMTPLUS11       30) GMTPLUS9
  4) GMT-11          13) GMT-7           22) GMTPLUS12       31) GREENWICH
  5) GMT-12          14) GMT-8           23) GMTPLUS2        32) UCT
  6) GMT-13          15) GMT-9           24) GMTPLUS3        33) UNIVERSAL
  7) GMT-14          16) GMT             25) GMTPLUS4        34) UTC
  8) GMT-2           17) GMT0            26) GMTPLUS5        35) ZULU
  9) GMT-3           18) GMTPLUS0        27) GMTPLUS6

Press &quot;Return&quot; to redisplay, enter &quot;=&quot; to search or &quot;?&quot; for help, or
Select the number above that best represents the desired time zone: 19


You selected ETC / GMTPLUS1 as your time zone.
Is this correct? (Yes/No) [YES]: yes
</code></pre>

<p>Time zone here in The Netherlands is GMT+1.</p>

<pre><code>    Configuring the Time Differential Factor (TDF)


    Default Time Differential Factor is -1:00.

    The Time Differential Factor (TDF) is the difference between your
    system time and Coordinated Universal Time (UTC).  UTC is similar
    in most respects to Greenwich Mean Time (GMT).

    The TDF is expressed as hours and minutes, and should be entered
    in the hh:mm format.  TDFs for the Americas will be negative
    (-3:00, -4:00, etc.); TDFs for Europe, Africa, Asia and Australia
    will be positive (1:00, 2:00, etc.).


Enter the Time Differential Factor [-1:00]:

    NEW SYSTEM TIME DIFFERENTIAL FACTOR = -1:00

Is this correct? [Y]:
</code></pre>

<p>Defaults are fine here.</p>

<pre><code>Do you want to register any Product Authorization Keys? (Yes/No) [Yes] no
</code></pre>

<p>Entering the license later on is way easier then during the installation.</p>

<pre><code>    The following products are part of the the OpenVMS installation;
    they will be installed along with the OpenVMS operating system:

        o Availability Manager (base) for OpenVMS Alpha
        o CDSA for OpenVMS Alpha
%SYSTEM-F-ACCVIO, access violation, reason mask=00, virtual address=FFFFFFFFFFFFFFB8, PC=000000007
FDC5210, PS=0000001B

  Improperly handled condition, image exit forced.
    Signal arguments:   Number = 0000000000000005
                        Name   = 000000000000000C
                                 0000000000000000
                                 FFFFFFFFFFFFFFB8
                                 000000007FDC5210
                                 000000000000001B

    Register dump:
    R0  = 000000007FD1A7B8  R1  = 000000007FC71748  R2  = 000000007FD1A888
    R3  = 000000007FC717C0  R4  = 00000000000310FC  R5  = 000000007FFEFD00
    R6  = 000000007FC71768  R7  = 000000007FCC526C  R8  = 000000007FF9CDE8
    R9  = 000000007FC719B0  R10 = 000000007FC717C0  R11 = 0000000000000001
    R12 = 000000007FFCDA98  R13 = 000000007FD22318  R14 = 0000000000000000
    R15 = 000000007FD1E970  R16 = 000000007FC71768  R17 = 0000000000000000
    R18 = 000000007FC71710  R19 = 0000000000000001  R20 = 0000000000000003
    R21 = 000000007FC7174E  R22 = 0000000000000007  R23 = 000000007FC71719
    R24 = 0000000000000000  R25 = 0000000000010B44  R26 = 000000007FDC5204
    R27 = 000000007FD1A790  R28 = 0000000000000001  R29 = 000000007FC71740
    SP  = 000000007FC71740  PC  = 000000007FDC5210  PS  = 000000000000001B
%SYSTEM-F-ACCVIO, access violation, reason mask=!XB, virtual address=!XH, PC=!XH, PS=!XL


    Installation has been terminated by an unexpected error.

    The installation has not completed normally.

    You should correct the situation which caused the termination
    and then re-do the installation or upgrade.

  Process AXPVMS INSTALL logged out at 23-APR-2018 20:37:00.40

Press Return to continue...
</code></pre>

<p>No! We were so far this time. I tried the install another time, this time with
ODS-2 as the filesystem, and it failed again, just a little further than the
previous time. Literally, 1 line later:</p>

<pre><code>    The following products are part of the the OpenVMS installation;
    they will be installed along with the OpenVMS operating system:

        o Availability Manager (base) for OpenVMS Alpha
        o CDSA for OpenVMS Alpha
        o KERBEROS for OpenVMS Alpha
%SYSTEM-F-ACCVIO, access violation, reason mask=00, virtual address=FFFFFFFFFFFFFFB8, PC=000000007
FDC5210, PS=0000001B

  Improperly handled condition, image exit forced.
    Signal arguments:   Number = 0000000000000005
                        Name   = 000000000000000C
                                 0000000000000000
                                 FFFFFFFFFFFFFFB8
                                 000000007FDC5210
                                 000000000000001B

    Register dump:
    R0  = 000000007FD1A7B8  R1  = 000000007FC71748  R2  = 000000007FD1A888
    R3  = 000000007FC717C0  R4  = 00000000000310FC  R5  = 000000007FFEFD00
    R6  = 000000007FC71768  R7  = 000000007FCC526C  R8  = 000000007FF9CDE8
    R9  = 000000007FC719B0  R10 = 000000007FC717C0  R11 = 0000000000000001
    R12 = 000000007FFCDA98  R13 = 000000007FD22318  R14 = 0000000000000000
    R15 = 000000007FD1E970  R16 = 000000007FC71768  R17 = 0000000000000000
    R18 = 000000007FC71710  R19 = 0000000000000001  R20 = 0000000000000003
    R21 = 000000007FC7174E  R22 = 0000000000000007  R23 = 000000007FC71719
    R24 = 0000000000000000  R25 = 0000000000010B44  R26 = 000000007FDC5204
    R27 = 000000007FD1A790  R28 = 0000000000000001  R29 = 000000007FC71740
    SP  = 000000007FC71740  PC  = 000000007FDC5210  PS  = 000000000000001B
%SYSTEM-F-ACCVIO, access violation, reason mask=!XB, virtual address=!XH, PC=!XH, PS=!XL


    Installation has been terminated by an unexpected error.

    The installation has not completed normally.

    You should correct the situation which caused the termination
    and then re-do the installation or upgrade.

  Process AXPVMS INSTALL logged out at 23-APR-2018 20:41:53.85

Press Return to continue...
</code></pre>

<p>Reading through <a href="https://web.archive.org/web/20180424184218/http://es40.org/dox/guest_os.html">more dev docs from the emulator</a>, I found this:</p>

<blockquote>
<p>There is a permissions violation during install. Do not abort it, and the
install will work anyway. (note Camiel: differing results of installation
reported. A lot seems to depend on timing).</p>
</blockquote>

<p>I tried a few more times, playing with the config file (different CPU speed,
different disk sizes etc), but I ran into other failures like these:</p>

<pre><code>Exception in CPU thread: System exception: cannot signal semaphore: count would exceed maximum.
Emulator Failure: Threading error: CPU thread has died: AlphaCPU.cpp, line 532
Stop threads: cpu0 ali kbd ide0 ide1 srl0
Freeing memory in use by system...
pci0.15(ali_ide).disk0.0(file): Closing file.
*** Error in `es40&#39;: double free or corruption (fasttop): 0x0000000001886fe0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7fe419d977e5]
/lib/x86_64-linux-gnu/libc.so.6(+0x8037a)[0x7fe419da037a]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7fe419da453c]
es40[0x43ade9]
es40[0x45597f]
es40[0x4559e9]
es40(main+0x367)[0x405907]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7fe419d40830]
es40[0x405c09]
======= Memory map: ========
00400000-00497000 r-xp 00000000 00:00 489903                     /usr/local/bin/es40
00696000-00697000 r--p 00096000 00:00 489903                     /usr/local/bin/es40
00697000-0069d000 rw-p 00097000 00:00 489903                     /usr/local/bin/es40
0069d000-006bf000 rw-p 00000000 00:00 0
01868000-018aa000 rw-p 00000000 00:00 0      
</code></pre>

<p>Since I already spent a few hours tinkering without result, <a href="https://web.archive.org/web/20180424185148/http://www.openvmshobbyist.com/forum/viewthread.php?forum_id=163&amp;thread_id=1616&amp;rowstart=20">the only post
here</a> wasn&#39;t very usefull since my disk is only 600 MB, and I didn&#39;t find
any other information, I decided to stop here and try it in another emulator,
probably FreeAXP for Windows.</p>

<p>Let&#39;s hope the x86 port is finished soon so it can run under KVM and virtualbox.</p>
Tags: <a href="../tags/alpha.html">alpha</a>
, <a href="../tags/blog.html">blog</a>
, <a href="../tags/dec.html">dec</a>
, <a href="../tags/decus.html">decus</a>
, <a href="../tags/es40.html">es40</a>
, <a href="../tags/itanium.html">itanium</a>
, <a href="../tags/openvms.html">openvms</a>
, <a href="../tags/pdp.html">pdp</a>
, <a href="../tags/simh.html">simh</a>
, <a href="../tags/vax.html">vax</a>
, <a href="../tags/vms.html">vms</a>
</div></main>
<br/>
<footer>
<br>
                <p><small>
                <a href="/s/">Home</a> | 
                <a href="/s/static/About.html">About</a> | 
                <a href="/s/tags/all.html">All pages</a> | 
                <a href="/s/software/Sparkling_Network.html">Cluster Status</a> | 
                Generated by <a href="/s/software/ingsoc.html">ingsoc</a>.</small>
                </p>
    
    </footer>
    <script data-goatcounter="https://raymii.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>

    <script defer src="/s/inc/js/instant.5.2.0.js"  type="module" ></script>

     
    </main>
    </body>
    </html>
    